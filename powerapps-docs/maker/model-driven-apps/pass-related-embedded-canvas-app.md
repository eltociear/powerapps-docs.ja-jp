---
title: 関連付けられたレコードのリストをデータ コンテキストとして埋め込みキャンバス アプリと共に渡す | MicrosoftDocs
ms.custom: ''
ms.date: 06/25/2019
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: get-started-article
applies_to:
  - Dynamics 365 (online)
  - Dynamics 365 Version 9.x
  - PowerApps
author: Aneesmsft
ms.author: matp
manager: kvivek
tags:
  - PowerApps maker portal impact
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="pass-a-list-of-related-records-as-data-context-to-an-embedded-canvas-app"></a>関連付けられたレコードのリストをデータ コンテキストとして埋め込みキャンバス アプリに渡す
> [!IMPORTANT]
> モデル駆動型フォームに埋め込まれたキャンバス アプリケーションがプレビューから外され、一般的に、使用可能です。 以下に示す手順は古すぎて、モデル駆動型フォームに埋め込まれたキャンバス アプリケーションの共有プレビューリリースに対してのみ適用可能です。
> 最新リリースの手順の更新された一覧については、 [駆動型モデルのキャンバス アプリケーションの埋め込みフォームの追加](embedded-canvas-app-add-classic-designer.md) を参照してください。

このトピックでは、埋め込みキャンバス アプリを追加して、現在の (メイン フォーム) レコードに関連付けられたレコードのリストをデータ コンテキストとして埋め込みキャンバス アプリに渡す方法を説明します。

埋め込みキャンバス アプリを取引先企業のメイン フォーム上に追加して、現在の取引先企業レコードに関連付けられた取引先担当者のリストを埋め込みキャンバス アプリに渡すとしましょう。 これを行うには、次の手順を実行します。

1.  [PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) にサインインして、取引先企業エンティティなどのエンティティのメイン フォームのためにフォーム エディターを開きます。
2.  埋め込みキャンバス アプリを表示するフォーム上のセクションを選択します。
3.  選択したセクションの、**挿入**タブの、**コントロール** グループで、**サブグリッド**を選択します。
4.  **プロパティの設定**ダイアログ ボックスで、**表示**タブを選択してから、**名前**ボックスにグリッド コントロールの名前を入力します。
5.  **データ ソース** セクションで、データ コンテキストとして埋め込みキャンバス アプリに渡すレコードのリストに関連付けられた**エンティティ**および**既定のビュー**を選択します。
6. **コントロール** タブを選択してから、**コントロールの追加...** を選択します
7. **コントロールの追加** ダイアログ ボックスの、使用可能なコントロールの一覧で、**キャンバス アプリ** を選択してから **追加** を選択します。
8. **プロパティの設定**ダイアログ ボックスの、コントロールのリストで**キャンバス アプリ**を選択してから **Web** オプションを選択します。
9. コントロール リストの下部のセクションに、キャンバス アプリ コントロールに対応するプロパティのリストを確認して、以下の内容に注意します。
     - **エンティティ名**プロパティは、埋め込みキャンバス アプリにデータを提供するエンティティを指定します。 これは以前選択したエンティティに設定されます。
         -  このプロパティが変更可能として表示される場合であっても、それに対する変更は埋め込みキャンバス アプリ上に影響を与えません。 それは参照することのみを目的としています。
     -  **ビュー名**プロパティは、埋め込みキャンバス アプリに提供されるデータのフィルター処理に使用されるエンティティのビューを指定します。 これは以前選択した**既定のビュー**に設定されます。
         -  実行時に埋め込みキャンバス アプリに送信されるデータ (フィールドおよび値) はこのビューにより決定されます。 ビューに含まれる、または必要に応じてビューに追加されるキャンバス アプリ内のフィールドのみを使用します。 ビューに含まれていないフィールドすべてには、実行時に空の値として表示されます。
         -  ビューのフィルター条件は、作成時には使用されません。 そのため、埋め込みキャンバス アプリを作成するときに表示されるデータはフィルター処理されず、単にアクセス対象の上部にある少数のレコードのリストとなります。 実行時、ビューのフィルター条件は想定どおりに適用され、ユーザーに対して関連データのみが表示されます。
     -  **アプリ ID** プロパティは埋め込みキャンバス アプリの ID を指定します。 これはキャンバス アプリが作成されるときに自動的に生成および入力されます。
         -  アプリ ID の値を変更すると、モデル駆動型フォームから埋め込みキャンバス アプリへのリンクが切断されることに注意してください。
10. キャンバス アプリを作成または編集するには**カスタマイズ** ボタンを選択します。 これにより新規ブラウザタブに PowerApps Studio が開きます。
     > [!IMPORTANT]
     > PowerApps Studio を開くことが Web ブラウザーのポップアップ ブロッカーによりブロックされた場合、web.powerapps.com サイトを有効にするか、一時的にポップアップ ブロッカーを無効にしてから、再び **カスタマイズ** を選択する必要があります。 
11. PowerApps Studio で、左のウィンドウに配置された **ModelDrivenFormIntegration** コントロールがあることに注意してください。 このコントロールは、ホストのモデル駆動型フォームから埋め込みキャンバス アプリにコンテキスト データを取り込みます。 
12. **Gallery1** コントロールを選択して、**アイテム** プロパティに **ModelDrivenFormIntegration.Data** がセットされていることを確認します。
13. プロパティ ウィンドウの右の、**フィールド**の横の、**編集**を選択します。
14. データ ウィンドウで、**Title1** コントロールにマッピングされたフィールドを**FullName**に変更、またはデータを持つ他のフィールドに変更します。
15. ギャラリーに、ホストのモデル駆動型フォームから **ModelDrivenFormIntegration** コントロールを介して渡されるデータが表示されることを確認します。 データ ウィンドウを閉じます。
16. **ファイル** タブを選択して、**アプリの設定**を選択します。
17. **詳細設定**タブの、 **実験機能**セクションで、**ユーザー エクスペリエンスを埋め込むアプリを有効にする**を**オン**にセットします。
18. **保存**を選択します。 
19. **クラウド** タブを選択し、アプリに一意の名前をつけてから、右下にある**保存**を選択します。 以下に注意します。 
    -  アプリを初めて保存するときは、アプリが自動的に公開されます。 
      -  それ以降の保存時には、**公開**を選択してから**このバージョンを公開**を選択し、変更を有効にする必要があります。
20. **戻る**を選択してから、フォーム エディターを開いたブラウザー タブを選択します。 
21. **キャンバス アプリ** コントロールの**アプリ ID** プロパティに値が自動的に入力されたことを確認します。 以下に注意します。 
     -  フォーム エディターには前のステップで他のブラウザー タブで開いた PowerApps Studio とのダイレクト リンクがあります。
     -  フォーム エディターは送信されるアプリ ID をリスニングしていました。
     -  アプリが保存されたときにアプリ ID が送信されました。
22. **プロパティの設定**ダイアログ ボックスで、**表示**タブを選択して、**フォームでラベルを表示する**をクリアしてから、**OK** を選択します。
     - このフォームに埋め込まれたキャンバス アプリが既にある場合は、「1 つのフォームで 1 つのキャンバス アプリのみを有効にすることができます。」というメッセージが表示されます。 新しいキャンバス アプリを追加するには、まず[現在の埋め込みキャンバス アプリを無効化](embedded-canvas-app-guidelines.md#disable-an-embedded-canvas-app)する必要があります。 次に、[新しい埋め込みキャンバス アプリを有効化](embedded-canvas-app-guidelines.md#enable-an-embedded-canvas-app)します。
23. **ホーム** タブで、**保存**を選択してから、**公開**を選択します。

埋め込みキャンバス アプリを自分のモデル駆動型フォームに追加した後、埋め込みキャンバス アプリを他のユーザーと共有します。 詳細: [埋め込みキャンバス アプリの共有](share-embedded-canvas-app.md)。

修正したフォームを含むモデル駆動型アプリ (統一インターフェイスのみ) を開くと、埋め込みキャンバス アプリがフォーム上に表示されます。 メイン フォームに表示されるレコードを変更すると、フォームに渡されたデータ コンテキストが変更され、関連するデータを表示するように埋め込みアプリがリフレッシュされます。

このトピックは、モデル駆動型フォームで埋め込みキャンバス アプリを使用する方法を説明しました。 さまざまなデータ ソースに接続してデータを取り込むように、埋め込みキャンバス アプリをさらにカスタマイズすることができます。 フィルター、検索、およびルックアップ機能、およびホストのモデル駆動型フォームからフィルターから渡されたコンテキストを使用して、これらのデータ ソース内の特定のレコードをフィルター処理または検索します。 WYSIWYG キャンバス アプリ エディターを使用して、ユーザーの環境に合ったインターフェイスを簡単に設計します。

## <a name="see-also"></a>関連項目
[モデル駆動型フォーム上にキャンバス アプリを埋め込む](embed-canvas-app-in-form.md) <br />
[埋め込み型キャンバス アプリケーションをモデル駆動フォームに追加する](embedded-canvas-app-add-classic-designer.md) <br />
[モデル駆動型フォームの埋め込み型キャンバス アプリケーションを編集する](embedded-canvas-app-edit-classic-designer.md) <br />
[モデル駆動フォームに埋め込まれたキャンバス アプリケーションの画面サイズと表示方向をカスタマイズする](embedded-canvas-app-customize-screen.md) <br />
[組み込みキャンバス アプリ内からホスト フォームで事前定義済みの操作を実行する](embedded-canvas-app-actions.md) <br />
[ModelDrivenFormIntegrationコントロールのプロパティとアクション](embedded-canvas-app-properties-actions.md) <br />
[埋め込みキャンバス アプリの共有](share-embedded-canvas-app.md)。 <br />
[埋め込みキャンバス アプリの作業のガイドライン](embedded-canvas-app-guidelines.md) <br />
[パブリック プレビュー リリースを使用して作成された、モデル駆動型フォームの埋込み型キャンバスアプリケーションを最新版へと移行する](embedded-canvas-app-migrate-from-preview.md) <br />
