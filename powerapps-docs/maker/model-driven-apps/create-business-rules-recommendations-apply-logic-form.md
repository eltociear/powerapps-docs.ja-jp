---
title: モデル駆動型アプリの業務ルールおよび推奨事項の作成 | MicrosoftDocs
ms.custom: ''
ms.date: 03/30/2020
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: get-started-article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
ms.assetid: 00e62904-2ce9-4730-a113-02b1fedbf22e
caps.latest.revision: 31
author: Mattp123
ms.author: matp
manager: kvivek
tags:
- Power Apps maker portal impact
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: e899ca5c8960e7263528de05653681b21197d197
ms.sourcegitcommit: 4b6f187c9501332f9acca5978fa326621f2980e5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/22/2020
ms.locfileid: "3394595"
---
# <a name="create-business-rules-and-recommendations-to-apply-logic-in-a-model-driven-app-form"></a>モデル駆動型アプリ フォームでロジックを適用するための業務ルールと推奨事項を作成

このトピックでは、業務ルールおよびビジネス レコメンデーションを作成し、JavaScript コードの記述またはプラグインの作成を行わずにモデル駆動型アプリでフォーム ロジックを適用する方法を示します。業務ルールは、変化が急速で、よく使用される業務ルールを実装および保守するための、単純なインターフェイスを提供します。 これらは メイン フォームと クイック作成 フォームに適用でき、モデル駆動型アプリケーション、旧式のwebアプリケーション、Dynamics 365 タブレット、 Dynamics 365 for Outlook (オンライン、オフラインモード) で動作します。

> [!NOTE]
> エンティティに対する業務ルールを定義し、すべてのフォームおよびサーバーに適用される用にするには、[エンティティの業務ルールの作成](/powerapps/maker/common-data-service/data-platform-create-business-rule) を参照してください。
  
 条件とアクションを組み合わせることで、業務ルールを使用して以下の操作を実行できます:  
  
-   フィールド値を設定する  
  
-   フィールド値をクリアする  
  
-   フィールド要件レベルを設定する  
  
-   フィールドを表示/非表示にする  
  
-   フィールドを有効化/無効化する  
  
-   データを検証し、エラー メッセージを表示する  
  
-   ビジネス インテリジェンスに基づいてビジネス レコメンデーションを作成します。  
  
## <a name="create-a-business-rule-or-business-recommendation"></a>ビジネス ルールまたはビジネス レコメンデーションの作成

1.  [Power Apps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) にサインインします。  

2.  **データ**を展開して**エンティティ**を選択し、目的のエンティティを選び**ビジネス ルール**タブを選択します。

3.  コマンド バーで、**ビジネス ルールに追加**を選択します。

     業務ルールの設計ウィンドウはユーザーに対して既に作成された 1 つの条件で開きます。 あらゆる規則は条件から始まります。 業務ルールはその条件に基づいて 1 つ以上のアクションをとります。  
  
    ![業務ルールの設計ウィンドウ](media/business-rules-design-window.png "業務ルールの設計ウィンドウ")  
  
   > [!TIP]
> 既存の業務ルールを修正する場合は、その修正を行う前に、非アクティブ化する必要があります。

4.  必要に応じて、ウィンドウの左上コーナーの説明ボックスに説明を追加します。  
  
5.  次に従ってスコープを設定します:  
  
    |||  
    |-|-|  
    |**このアイテムを選択する場合…**|**スコープは次に設定されます...**|  
    |**エンティティ**|すべてのフォームとサーバー|  
    |**すべてのフォーム**|すべてのフォーム|  
    |特定のフォーム (例えば、**取引先企業**フォームです)|このフォームのみ|  
  
6. **条件を追加します。** 業務ルールにそのほかの条件を追加するには:  
  
    1.  **コンポーネント**タブから**条件**コンポーネントをデザイナーの [+] 記号にドラッグします。  
  
        ![ビジネス ルールに条件を追加する](media/add-condition-business-rule.png "ビジネス ルールに条件を追加する")  
  
    2.  条件のプロパティを設定するには、デザイナー ウィンドウで**条件**コンポーネントを選択し、画面右側の**プロパティ** タブでプロパティを設定します。 プロパティを設定すると、**プロパティ**タブの下部に式が作成されます。  
  
    3.  追加の句 (AND や OR) を条件に追加するには、**プロパティ**タブの**新規**を選択し、新たなルールを作成してからルールのプロパティを設定します。 **ルール ロジック**フィールドで、AND または OR として新しいルールを追加するかを指定できます。  
  
        ![条件に新しいルールを追加する](media/add-new-rule-condition.png "条件に新しいルールを追加する")  
  
    4.  条件のプロパティの設定が終了したら、**適用**を選択します。  
  
7. **アクションを追加します。** アクションを追加するには:  
  
    1.  **コンポーネント**タブのアクション コンポーネントの 1 つを**条件**コンポーネントの隣にあるプラス記号へドラッグします。 条件が満たされる場合に業務ルールによるアクションを実行する場合は、アクションをチェック マークの隣にあるプラス記号にドラッグするか、または条件が満たされない場合に業務ルールによるアクションを実行する場合は、アクションを X の隣にあるプラス記号にドラッグします。  
  
        ![アクションを業務ルールへドラッグする](media/drag-an-action-business-rule.png "アクションを業務ルールへドラッグする")  
  
    2.  アクションのプロパティを設定するには、デザイナー ウィンドウで**アクション** コンポーネントを選択し、画面右側の**プロパティ** タブでプロパティを設定します。  
  
    3.  プロパティ設定の完了後は、**適用**を選択します。  
  
8. **ビジネス レコメンデーションを追加します。** ビジネス レコメンデーションを追加するには:  
  
    1.  **コンポーネント**タブの**レコメンデーション**コンポーネントを**条件**コンポーネントの隣にあるプラス記号へドラッグします。 条件が満たされる場合に業務ルールによるアクションを実行する場合は、**レコメンデーション**コンポーネントをチェック マークの隣にあるプラス記号にドラッグするか、または条件が満たされない場合に業務ルールによるアクションを実行する場合は、X の隣にあるプラス記号にドラッグします。  
  
    2.  レコメンデーションのプロパティを設定するには、デザイナー ウィンドウの**レコメンデーション**コンポーネントを選択し、**プロパティ**タブでプロパティを設定します。  
  
    3.  さらに多数のアクションをレコメンデーションに追加するには、**コンポーネント**タブからそれらをドラッグし、**プロパティ**タブで各アクションに対するプロパティを設定します。  
  
        > [!NOTE]
        >  レコメンデーションを作成するとき、単一のアクションが既定で追加されます。 レコメンデーションにおけるすべてのアクションを表示するには、**レコメンデーション**コンポーネントの**詳細**を選択します。  
  
    4.  プロパティ設定の完了後は、**適用**を選択します。  
  
9. ビジネス ルールを検証するには、アクション バーで**検証**を選択します。  
  
10. ビジネス ルールを保存するには、[操作] バーの**保存**を選択します。  
  
11. 業務ルールを有効にするには、ソリューション エクスプローラーのウィンドウで業務ルールを選択し、続いて**有効化**を選択します。 デザイナー ウィンドウでは業務ルールを有効化できません。  
  
> [!TIP]
>  デザイナー ウィンドウの業務ルールを操作する時に覚えておくと役に立つヒントが次に示されています:  
>   
> - 業務ルール ウィンドウのすべてのスナップショットを作成するには、[操作] バーの**スナップショット**を選択します。 これは、チーム メンバーとビジネス ルールを共有して、コメントをもらう場合などに便利です。  
> - ミニマップを使用すると、プロセスの異なる部分に素早く移動できます。 これは画面の外での複雑なプロセスがあるときに便利です。  
> - 条件、アクション、ビジネス レコメンデーションを業務ルールに追加すると、業務ルールのコードが作成されて、デザイナー ウィンドウの下部に表示されます。 このコードは読み取り専用です。  
  
<a name="BKMK_LocalizingErrorMessages"></a>   
## <a name="localize-error-messages-used-in-business-rules"></a>業務ルールで使用されるエラー メッセージのローカライズ  
 組織で使用する複数の言語が存在する場合は、設定したエラー メッセージのローカライズが必要になると思われます。 メッセージを設定するたびに、ラベルがシステムによって生成されます。 組織で翻訳をエクスポートする場合、メッセージのローカライズされたバージョンを追加してから、それらのラベルをシステムにインポートできます。これにより、基本言語以外の言語を使用するユーザーは翻訳されたメッセージを表示することができます。  

## <a name="common-issues"></a>一般的な問題
このセクションでは業務ルールの使用時に発生する可能性がある一般的な問題について説明します。 

### <a name="full-name-field-not-supported-with-unified-interface-apps"></a>統一インターフェイス アプリで氏名フィールドはサポートされません。
**氏名** (fullname) フィールドを使用する操作や条件は、統一インターフェイスに基づくアプリでサポートされていません。  代わりに **名** (firstname) および **姓** (lastname) フィールドで操作または条件を使用できます。 

### <a name="business-rules-dont-fire-on-editable-grid-on-a-dashboard"></a>ダッシュボードの編集可能なグリッドでビジネス ルールが起動しません
ビジネス ルールをスコープしたエンティティは、編集可能グリッドがダッシュボード ページで構成されている場合、編集可能グリッドで起動しません。

### <a name="is-your-business-rule-not-firing-for-a-form"></a>フォームにビジネス ルールは生成されていませんか?
ビジネス ルールで参照されるフィールドがフォームと共に含まれていないため、ビジネス ルールが実行されない可能性があります。 
1.    ソリューション エクスプローラーを開きます。 目的のエンティティを展開してから**フォーム**を選択します。 
2.    目的のフォームを開いてから、フォーム デザイナー リボン上で**ビジネス ルール**を選択します。 
3.    フォーム デザイナーで、ビジネス ルールを開きます。 
4.    ビジネス ルール デザイナーで各条件およびアクションを選択して、各条件およびアクションで参照されるすべてのフィールドを検証します。 

        > [!div class="mx-imgBorder"] 
        > ![](media/business-rule-field.png "Field referenced in business rule exists in entity")

 5.    また、ビジネス ルールで参照される各フィールドがフォーム上にも含まれていることを確認します。 含まれていない場合、不足しているフィールドをフォームに追加します。

        > [!div class="mx-imgBorder"] 
        > ![](media/account-name-on-form.png "Account name field on form")

## <a name="frequently-asked-questions-faq"></a>よくあるご質問 (FAQ)
*業務ルールは読み取り専用フォームのフィールドのロックを解除できますか。*
- はい、業務ルールはフィールドをロック解除して、読み取り専用フォームのアクションを編集可能にします。

*実行していない業務ルールはどうトラブルシューティングしますか。* 
- このトピックの[ビジネス ルールがフォームに対して実行されない場合](#is-your-business-rule-not-firing-for-a-form)を参照してください。

## <a name="see-also"></a>関連項目  
 [プロセスを通じてカスタム ビジネス ロジックを作成する](guide-staff-through-common-tasks-processes.md)   
 [ビジネス プロセス フローの作成](/flow/create-business-process-flow)   

