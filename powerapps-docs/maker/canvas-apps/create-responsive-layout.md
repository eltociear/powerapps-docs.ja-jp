---
title: キャンバスアプリで応答性の高いレイアウトを作成する |Microsoft Docs
description: キャンバスアプリでのコントロールの高さ、幅、X、および Y プロパティの構成に関するリファレンス情報
author: emcoope-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: canvas
ms.reviewer: tapanm-msft
ms.date: 9/20/2019
ms.author: emcoope
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: eee82691b288f21749fe58adbf02ab5ffc3bd8b4
ms.sourcegitcommit: 7016ff837eff2cb0985fc71edab95cbf99335677
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2019
ms.locfileid: "71159857"
---
# <a name="create-responsive-layouts-in-canvas-apps"></a>キャンバスアプリで応答性の高いレイアウトを作成する

PowerApps でキャンバスアプリを作成する前に、スマートフォンとタブレットのどちらのアプリを調整するかを指定します。 このオプションを選択すると、アプリをビルドするキャンバスのサイズと形状が決まります。

この選択を行った後、[**ファイル** > **アプリの設定** >  **] [画面サイズ + 向き**] を選択すると、さらにいくつかの選択肢が表示されます。 縦または横の向きと画面のサイズ (タブレットのみ) を選択できます。 また、縦横比をロックまたはロック解除したり、デバイスの回転をサポートしたりすることもできます。

これらの選択肢は、画面レイアウトをデザインするときに、他のすべての選択肢の基になります。 アプリが異なるサイズのデバイスまたは web 上で実行されている場合は、アプリが実行されている画面に合わせてレイアウト全体が拡張されます。 たとえば、スマートフォン用に設計されたアプリが大規模なブラウザーウィンドウで実行されている場合は、アプリのサイズを調整して、その領域のサイズを大きくすることができます。 アプリでは、さらに多くのコントロールやコンテンツを表示することで、追加のピクセルを利用することはできません。

応答性の高いレイアウトを作成すると、コントロールはさまざまなデバイスまたはウィンドウサイズに応答するため、さまざまなエクスペリエンスがより自然になります。 応答性の高いレイアウトを実現するには、アプリ全体でいくつかの設定を調整し、式を記述します。 

## <a name="disable-scale-to-fit"></a>サイズに合わせてスケールを無効にする

各画面は、アプリが実行されている実際の領域に合わせてレイアウトが適合するように構成できます。

応答性をアクティブ化するには、既定でオンになっているアプリの **[拡大/縮小]** 設定をオフにします。 この設定をオフにした場合は、特定の画面図形をデザインできなくなったため、**縦横比のロック**もオフになります。 (アプリでデバイスのローテーションがサポートされているかどうかを指定することもできます)。

![設定に合わせてスケールを無効にする](media/create-responsive-layout/scale-to-fit-off.png)

アプリの応答性を高めるには、追加の手順を実行する必要がありますが、この変更は、応答性を実現するための最初の手順です。

## <a name="understand-app-and-screen-dimensions"></a>アプリと画面のディメンションについて

アプリのレイアウトが画面の寸法の変更に応答するようにするには、画面の**幅**と**高さ**のプロパティを使用する数式を記述します。 これらのプロパティを表示するには、PowerApps Studio でアプリを開き、画面を選択します。 これらのプロパティの既定の数式は、右側のウィンドウの **[詳細設定]** タブに表示されます。

**Width** = `Max(App.Width, App.DesignWidth)`

**上下** = `Max(App.Height, App.DesignHeight)`

これらの数式は、アプリの**Width**、 **Height**、 **Designwidth**、および**designwidth**の各プロパティを参照します。 アプリの**幅**と**高さ**のプロパティは、アプリが実行されているデバイスまたはブラウザーのウィンドウのサイズに対応しています。 ユーザーがブラウザーウィンドウのサイズを変更した場合 (または**ロックの向き**をオフにした場合にデバイスを回転させる)、これらのプロパティの値は動的に変更されます。 これらの値が変更されると、画面の **[幅]** プロパティと **[高さ]** プロパティの数式が再評価されます。

**Designwidth**プロパティと**designwidth**プロパティは、 **[アプリ設定]** の **[画面サイズ + 向き]** ペインで指定したディメンションから取得されます。 たとえば、縦向きで電話レイアウトを選択した場合、 **Designwidth**は640、 **designwidth**は1136です。

画面の**幅**と**高さ**のプロパティの数式で使用されているため、 **designwidth**と**designwidth**は、アプリを設計する最小ディメンションと考えることができます。 アプリで使用可能な実際の領域がこれらの最小サイズよりも小さい場合、画面の**Width**プロパティと**Height**プロパティの数式によって、値が最小値より小さくなることはありません。 この場合、ユーザーは画面の内容をすべて表示するためにスクロールする必要があります。

アプリの**Designwidth**と**designwidth**を設定した後、画面の**幅**と**高さ**のプロパティごとに既定の式を変更する必要はありません (ほとんどの場合)。 このトピックでは、後でこれらの数式をカスタマイズするケースについて説明します。

## <a name="use-formulas-for-dynamic-layout"></a>動的レイアウトに数式を使用する

応答性の高いデザインを作成するには、絶対 (定数) 座標値ではなく数式を使用して、各コントロールを検索し、サイズを変更します。 これらの数式は、画面全体のサイズ、または画面上の他のコントロールと比較して、各コントロールの位置とサイズを表します。

> [!IMPORTANT]
> コントロールの**X**、 **Y**、 **Width** 、 **Height**の各プロパティに数式を記述した後、キャンバスエディターでコントロールをドラッグすると、数式は定数値で上書きされます。 動的レイアウトを実現するために数式の使用を開始する場合は、コントロールをドラッグしないようにしてください。

最も単純なケースでは、1つのコントロールが画面全体に表示されます。 この効果を作成するには、コントロールのプロパティを次の値に設定します。

| プロパティ      | Value            |
|--------|---------------|
| **閉じる**      | `0`             |
| **前年**      | `0`             |
| **幅**  | `Parent.Width`  |
| **上下** | `Parent.Height` |

これらの数式は**親**演算子を使用します。 画面に直接配置されたコントロールの場合、**親**は画面を参照します。 これらのプロパティ値を使用すると、コントロールは画面の左上隅 (0, 0) に表示され、画面と同じ**幅**と**高さ**になります。

このトピックの後半では、これらの原則 (および**親**演算子) を適用して、ギャラリー、グループコントロール、コンポーネントなどの他のコンテナー内にコントロールを配置します。

別の方法として、コントロールは画面の上半分だけを塗りつぶすことができます。 この効果を作成するには、 **height**プロパティを**Parent. height** /2 に設定し、他の数式は変更しないままにします。

2つ目のコントロールが同じ画面の下半分に収まるようにする場合は、その数式を構築するために、少なくとも2つの他の方法を使用できます。 わかりやすくするために、次の方法があります。

| コントロール | プロパティ | 数式           |
|-|----------|-------------------|
| **上限** | **閉じる**        | `0`                 |
| **上限** | **前年**        | `0`                 |
| **上限** | **幅**    | `Parent.Width`      |
| **上限** | **上下**   | `Parent.Height / 2` |
| **方** | **閉じる**        | `0`                 |
| **方** | **前年**        | `Parent.Height / 2` |
| **方** | **幅**    | `Parent.Width`      |
| **方** | **上下**   | `Parent.Height / 2` |

![上限と下限のコントロール](media/create-responsive-layout/dynamic-layout.png)

この構成では必要な効果が得られますが、コントロールの相対的なサイズを気にした場合は、各数式を編集する必要があります。 たとえば、最上位のコントロールが画面の一番上に表示されるようにし、下部の 2 ~ 3 を入力することを選択できます。 

その効果を作成するには、**上部**コントロールの**Height**プロパティと、**低い**コントロールの**Y**プロパティと**height**プロパティを更新する必要があります。 代わりに、次の例のように、**上位**コントロール (およびそれ自体) の観点から**下**のコントロールの数式を記述することを検討してください。


| コントロール | プロパティ | 数式           |
|-|----------|-------------------|
| **上限** | **閉じる**        | `0`                 |
| **上限** | **前年**        | `0`                 |
| **上限** | **幅**    | `Parent.Width`      |
| **上限** | **上下**   | `Parent.Height / 2` |
| **方** | **閉じる**        | `0`                       |
| **方** | **前年**        | `Upper.Y + Upper.Height`  |
| **方** | **幅**    | `Parent.Width`            |
| **方** | **上下**   | `Parent.Height - Lower.Y` |

![上側と下位のコントロールのサイズ変更](media/create-responsive-layout/dynamic-layout2.png)

これらの数式を配置したら、**上**のコントロールの**height**プロパティを変更して、画面の高さの異なる部分を表す必要があります。 **低い**コントロールは、変更のために自動的に移動され、サイズが変更されます。

これらの数式パターンを使用すると、 **C**という名前のコントロールと、その親または兄弟コントロール ( **D**) との間の一般的なレイアウトの関係を表すことができます。

| C とその親とのリレーションシップ | プロパティ | 数式 | 図表 |
|--|--|--|--|
| **C**は、余白が*N*の親の幅を入力します。 | **閉じる**| `N` | ![親の C 入力幅の例](media/create-responsive-layout/c1.png) |
|  | **幅** | `Parent.Width - (N * 2)` |  |
| **C**は、余白が*N*の親の高さを入力します | **前年** | `N` | ![親の C の塗りつぶしの高さの例](media/create-responsive-layout/c2.png) |
|  | **上下** | `Parent.Height - (N * 2)` |  |
| **C**は親の右端に、余白は*N*に揃えます。 | **閉じる** | `Parent.Width - (C.Width + N)` | ![C と親の端の配置の例](media/create-responsive-layout/c3.png) |
| **C**は、親の下端 (余白は*N* ) に揃えられます。 | **前年** | `Parent.Height - (C.Height + N)` | ![C と親の端の配置の例](media/create-responsive-layout/c4.png) |
| **C**の親で水平方向に中央揃え | **閉じる** | `(Parent.Width - C.Width) / 2` | ![親の横方向に中央揃えされる C の例](media/create-responsive-layout/c5.png) |
| **C**の親で垂直方向に中央揃え | **前年** | `(Parent.Height - C.Height) / 2` | ![親の中央に中央揃えされる C の例](media/create-responsive-layout/c6.png) |

| C と D の関係 | プロパティ | 数式 | 図表 |
|--|--|--|--|
| **C**は**d**で水平に、幅は**d**と同じ | **閉じる** | `D.X` | ![パターンの例](media/create-responsive-layout/d1.png) |
|  | **幅**    | `D.Width` |  |
| **C**は**d**と同じ高さに、 **d**は垂直方向に配置  | **前年** | `D.Y` | ![パターンの例](media/create-responsive-layout/d2.png) |
|  | **上下** | `D.Height` |  |
| **C**の右端を**D**の右端に揃える | **閉じる** | `D.X + D.Width - C.Width` | ![パターンの例](media/create-responsive-layout/d3.png) |
| **C**の下端を**D**の下端に揃える | **前年** | `D.Y + D.Height - C.Height` | ![パターンの例](media/create-responsive-layout/d4.png) |
| **C** **を基準**に水平方向に中央揃え | **閉じる** | `D.X + (D.Width - C.Width) / 2`  | ![パターンの例](media/create-responsive-layout/d5.png) |
| **C** **を基準**にして縦方向に中央揃え | **前年** | `D.Y + (D.Height - C.Height) /2` | ![パターンの例](media/create-responsive-layout/d6.png) |
| **C**の右側に位置し、N というギャップ**を持つ** | **閉じる** | `D.X + D.Width + N` | ![パターンの例](media/create-responsive-layout/d7.png) |
| **C**は**D**の下に位置し、 *N*はギャップがあります。             | **前年** | `D.Y + D.Height + N` | ![パターンの例](media/create-responsive-layout/d8.png) |
| **C**は、 **D**と親の右端の間にスペースを挿入します | **閉じる** | `D.X + D.Width` | ![パターンの例](media/create-responsive-layout/d9.png) |
|  | **幅** | `Parent.Width - C.X` |  |
| **C**は、親の**D**と下端の間にスペースを挿入します。 | Y | `D.Y + D.Height` | ![パターンの例](media/create-responsive-layout/d10.png) |

## <a name="hierarchical-layout"></a>階層型レイアウト

より多くのコントロールを含む画面を作成すると、画面や兄弟コントロールを基準とするのではなく、親コントロールを基準としてコントロールを配置する方が便利な (または必要に応じて) ようになります。 コントロールを階層構造に整理することで、数式を簡単に記述して維持することができます。

### <a name="galleries"></a>ギャラリー

アプリでギャラリーを使用する場合は、ギャラリーのテンプレート内にコントロールを配置する必要があります。 これらのコントロールを配置するには、ギャラリーテンプレートを参照する**親**演算子を使用する数式を記述します。 ギャラリーテンプレート内のコントロールの数式では、親の**TemplateHeight**プロパティと**Parent. templateheight**プロパティを使用します。ギャラリーの全体的なサイズを参照する、 **parent**と**parent. Height**は使用しないでください。

![テンプレートの幅と高さを示す垂直方向のギャラリー](media/create-responsive-layout/gallery-vertical.png)

### <a name="container-control"></a>コンテナーコントロール

親コントロールとして、実験的な機能である**コンテナー**コントロールを使用できます。 この機能を有効にするには、[**ファイル** > **アプリ設定** > ] **[詳細設定]** の順に選択します。

画面の上部にあるヘッダーの例を考えてみましょう。 タイトルと、ユーザーが対話できるいくつかのアイコンを持つヘッダーがあるのが一般的です。 このようなヘッダーは、**ラベル**コントロールと2つの**アイコン**コントロールを含む**コンテナー**コントロールを使用して作成できます。

![グループを使用したヘッダーの例](media/create-responsive-layout/header-group.png)

これらのコントロールのプロパティを次の値に設定します。

| プロパティ | ヘッダー | メニュー | ok | Title |
|--|--|--|--|--|
| **閉じる** | `0`  | `0` | `Parent.Width - Close.Width` | `Menu.X + Menu.Width` |
| **前年** | `0` | `0` | `0` | `0` |
| **幅**  | `Parent.Width` | `Parent.Height` | `Parent.Height` | `Close.X - Title.X` |
| **上下** | `64` | `Parent.Height` | `Parent.Height` | `Parent.Height` |

**ヘッダー**コントロールの場合、 `Parent`は画面を参照します。 それ以外の場合`Parent` 、は**ヘッダー**コントロールを参照します。

これらの式を記述すると、プロパティの数式を変更することによって、**ヘッダー**コントロールのサイズや位置を調整できます。 子コントロールのサイズと位置は、それに応じて自動的に調整されます。

### <a name="components"></a>コンポーネント

別の試験的な機能である "コンポーネント" を使用する場合は、ビルドブロックを作成し、アプリ全体で再利用できます。 **コンテナー**コントロールと同様に、コンポーネント内に配置するコントロールは、コンポーネントのサイズを参照する`Parent.Width`および`Parent.Height`の式の位置とサイズを決定する必要があります。 詳細情報:[コンポーネントを作成](create-component.md)します。

## <a name="adapting-layout-for-device-size-and-orientation"></a>デバイスのサイズと向きに合わせたレイアウトの調整

ここまでは、使用可能な領域に応じて各コントロールのサイズを変更する数式を使用する方法を説明しましたが、コントロールは互いに相対的に調整されています。 ただし、さまざまなデバイスのサイズと向きに応じて、より大きなレイアウトの変更を行う必要がある場合や、必要な場合もあります。 たとえば、デバイスを縦向きから横方向に回転させる場合は、縦方向のレイアウトから横方向のレイアウトに切り替えることができます。 より大きなデバイスでは、より魅力的なレイアウトを提供するために、より多くのコンテンツを表示したり、再配置したりすることができます。 小さいデバイスでは、複数の画面間でコンテンツを分割する必要がある場合があります。

### <a name="device-orientation"></a>デバイスの向き

前に説明したように、画面の **[幅]** プロパティと **[高さ]** プロパティの既定の式は、ユーザーがデバイスを回転させる場合、必ずしも適切なエクスペリエンスを提供するとは限りません。 たとえば、縦向きの電話向けに設計されたアプリの場合、 **Designwidth**は640、 **designwidth**は1136です。 スマートフォン上の同じアプリの横方向には、次のプロパティ値が設定されます。

- 画面の**Width**プロパティはに`Max(App.Width, App.DesignWidth)`設定されています。 アプリの**幅**(1136) が**designwidth** (640) を超えているため、数式は1136に評価されます。
- 画面の**Height**プロパティはに`Max(App.Height, App.DesignHeight)`設定されています。 アプリの**高さ**(640) が**designheight** (1136) よりも小さいため、数式は1136に評価されます。

画面の**高さ**が1136で、デバイスの高さ (この向きは 640) である場合、ユーザーは画面を垂直方向にスクロールしてすべてのコンテンツを表示する必要がありますが、必要なエクスペリエンスではない可能性があります。

画面の**幅**と**高さ**のプロパティをデバイスの向きに合わせて調整するには、次の式を使用します。

**Width** = `Max(App.Width, If(App.Width < App.Height, App.DesignWidth, App.DesignHeight))`

**上下** = `Max(App.Height, If(App.Width < App.Height, App.DesignHeight, App.DesignWidth))`

これらの数式は、デバイスの幅が高さ (縦向き) より小さいか、高さ (横向き) を超えているかに基づいて、アプリの**designwidth**と**designwidth**の値を入れ替えます。

画面の**幅**と**高さ**の数式を調整した後、使用可能な領域をより適切に使用できるように、画面内のコントロールを再配置することもできます。 たとえば、2つのコントロールのそれぞれが画面の半分を占めている場合、縦方向に積み重ねて、横に並べて配置することができます。

画面の**向き**プロパティを使用して、画面が垂直方向か水平方向かを判断できます。

> [!NOTE]
> 横方向では、**上下**の**コントロールは**左および右のコントロールとして表示されます。

| コントロール | プロパティ | 数式 |
|--|----------|---|
| **上限** | **閉じる** | `0` |
| **上限** | **前年** | `0` |
| **上限** | **幅** | `If(Parent.Orientation = Layout.Vertical, Parent.Width, Parent.Width / 2)` |
| **上限** | **上下**   | `If(Parent.Orientation = Layout.Vertical, Parent.Height / 2, Parent.Height)` |
| **方** | X | `If(Parent.Orientation = Layout.Vertical, 0, Upper.X + Upper.Width)`  |
| **方** | Y | `If(Parent.Orientation = Layout.Vertical, Upper.Y + Upper.Height, 0)` |
| **方** | **幅** | `Parent.Width - Lower.X` |
| **方** | **上下** | `Parent.Height - Lower.Y` |

![縦向きを調整する式](media/create-responsive-layout/portrait.png)

![横長の向きを調整する式](media/create-responsive-layout/landscape.png)

### <a name="screen-sizes-and-breakpoints"></a>画面のサイズとブレークポイント

デバイスのサイズに基づいてレイアウトを調整できます。 画面の**サイズ**プロパティは、現在のデバイスのサイズを分類します。 サイズは正の整数です。ScreenSize 型は、読みやすくするために名前付き定数を提供します。 次の表は定数を示しています。

| 定率              | Value | 一般的なデバイスの種類 (既定のアプリ設定を使用) |
|-----------------------|-------|--------------------------------------------------|
| ScreenSize      | 1     | ダイヤル                                            |
| ScreenSize     | 2     | タブレット (垂直方向)                          |
| ScreenSize      | 3     | タブレット (水平方向に保持)                        |
| ScreenSize ExtraLarge | 4     | デスクトップコンピューター                                 |

これらのサイズを使用して、アプリのレイアウトに関する意思決定を行います。 たとえば、コントロールを電話サイズのデバイスで非表示にし、それ以外の場合は表示するには、コントロールの**visible**プロパティを次の数式に設定します。

`Parent.Size >= ScreenSize.Medium`

この数式は、サイズが中以上の場合は**true** 、それ以外の場合は**false**に評価されます。

画面のサイズに基づいて、画面の幅の異なる部分をコントロールで使用する場合は、コントロールの**width**プロパティを次の数式に設定します。

```powerapps-dot
Parent.Width *  
    Switch(Parent.Size,  
        ScreenSize.Small, 0.5,  
        ScreenSize.Medium, 0.3,  
        0.25)
```
この数式は、小さい画面ではコントロールの幅を画面の幅の半分に、中画面では画面の幅を3分の1に、他のすべての画面で画面の幅を4分に設定します。

## <a name="custom-breakpoints"></a>カスタムブレークポイント

画面の **サイズ** プロパティは、画面の **幅** プロパティとアプリの**sizebreakpoints ブレークポイント** プロパティの値を比較することによって計算されます。 このプロパティは、名前付きの画面サイズを区切る幅のブレークポイントを示す、数値の単一列テーブルです。

タブレットまたは web 用に作成されたアプリでは、アプリの**Sizebreakpoints ポイント**プロパティの既定値は **[600, 900, 1200]** です。 スマートフォン用に作成されたアプリでは、値は **[1200, 1800, 2400]** です。 (このようなアプリでは、他のアプリで使用される座標が実質的に倍になる座標を使用しているため、電話アプリの値は2倍になります)。

!["App.config ブレークポイント" プロパティの既定値](media/create-responsive-layout/default-breakpoints.png)

アプリ**のブレークポイントプロパティの**値を変更することで、アプリのブレークポイントをカスタマイズできます。 ツリービューで **[アプリ]** を選択し、プロパティ ボックスの一覧で  **[sizebreakpoints ポイント]** を選択します。次に、数式バーの値を編集します。 アプリに必要な数のブレークポイントを作成できますが、名前付きの画面サイズに対応するのは 1 ~ 4 のサイズのサイズのみです。 数式では、ExtraLarge を超えるサイズを数値 (5、6など) で参照できます。

また、指定するブレークポイントの回数を減らすこともできます。 たとえば、アプリに必要なサイズは3つ (2 つのブレークポイント) のみであるため、画面のサイズは小、中、大になります。

## <a name="known-limitations"></a>既知の制限

作成キャンバスは、作成されたサイズ変更の数式に応答しません。 応答性の高い動作をテストするには、アプリを保存して発行し、さまざまなサイズや向きのデバイスまたはブラウザーウィンドウで開きます。

コントロールの**X**、 **Y**、 **Width**、 **Height**の各プロパティに式または数式を記述する場合は、後でコントロールを別の場所にドラッグするか、ドラッグしてコントロールのサイズを変更すると、これらの式または数式が上書きされます。境界線。
