---
title: キャンバス アプリのレスポンシブ レイアウトの作成 | Microsoft Docs
description: キャンバス アプリのコントロールの高さ、幅、X、および Y プロパティの構成に関する参照情報
author: emcoope-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: canvas
ms.reviewer: tapanm-msft
ms.date: 04/22/2020
ms.author: emcoope
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 305a43fccf658125a0746305a4d98256bc9dc552
ms.sourcegitcommit: 5a87f0e3ec317ccb8752a6635a4c5b2091aadbca
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2020
ms.locfileid: "3309466"
---
# <a name="create-responsive-layouts-in-canvas-apps"></a>キャンバス アプリのレスポンシブ レイアウトの作成

Power Apps でキャンバス アプリを構築する前に、アプリを携帯電話またはタブレット PC 用に調整するかどうか指定します。 この選択により、アプリを構築するキャンバスのサイズと形状が決定されます。

その選択を行った後、**ファイル** > **アプリの設定** > **画面のサイズと表示方向**を選択して、さらにいくつかの選択を行うことができます。 縦向きまたは横向き、画面サイズを選択できます (タブレット PC)。 また、縦横比の固定またはロック解除、およびデバイスの回転をサポートするかどうかも選択できます。

これらの選択は、画面レイアウトを設計するときに行うその他のすべての選択の基になります。 アプリが異なるサイズのデバイスまたは Web 上で実行されている場合、レイアウト全体はアプリが実行されている画面に合うサイズに調整されます。 たとえば、携帯電話向けに設計されたアプリが大きなブラウザー ウィンドウで実行されている場合、そのスペースを補うようにアプリのサイズが調整されるので、大きすぎるように見えます。 アプリは、より多くのコントロールまたはコンテンツを表示するので、追加のピクセルを利用することができません。

レスポンシブ レイアウトを作成すると、コントロールはさまざまなデバイスやウィンドウ サイズに対応することができ、さまざまなエクスペリエンスがより自然になります。 レスポンシブ レイアウトを実現するために、一部の設定を調整し、アプリ全体で式を記述します。 

## <a name="disable-scale-to-fit"></a>全体表示の無効化

アプリを実行している実際のスペースにレイアウトが適合するように、各画面を構成できます。

既定でオンになっているアプリの**全体表示**設定をオフにすることにより、応答性をアクティブ化できます。 この設定をオフにすると、特定の画面形状に合わせて設計する必要がないので、**縦横比を固定**もオフになります。 (アプリがデバイスのローテーションをサポートするかどうかを指定することもできます。)

![全体表示設定の無効化](media/create-responsive-layout/scale-to-fit-off.png)

アプリを応答性のあるものにするには追加の手順の実行が必要になりますが、この変更は応答性を可能にするための最初のステップです。

## <a name="understand-app-and-screen-dimensions"></a>アプリおよび画面のディメンションについて

アプリのレイアウトが画面のディメンションの変更に応答できるようにするには、画面の**幅**および**高さ**プロパティを使用して数式を記述します。 これらのプロパティを表示するには、Power Apps Studio アプリを開き、画面を選択します。 これらのプロパティに対する既定の式が、右側のウィンドウの**詳細設定**タブに表示されます。

**幅** = `Max(App.Width, App.DesignWidth)`

**高さ** = `Max(App.Height, App.DesignHeight)`

これらの数式は、アプリの**幅**、**高さ**、**DesignWidth**、および **DesignHeight** プロパティを参照します。 アプリの**幅**および**高さ**プロパティは、アプリを実行しているデバイスまたはブラウザー ウィンドウのディメンションに対応します。 ユーザーがブラウザー ウィンドウのサイズを変更した (または**向きを固定**をオフにしたデバイスを回転させた) 場合、これらのプロパティの値は動的に変化します。 これらの値が変更されると、画面の**幅**および**高さ**プロパティの数式は再評価されます。

**DesignWidth** および **DesignHeight** プロパティは、**アプリ設定**の**画面のサイズと表示方向**で指定されるディメンションから取得されます。 たとえば、縦向きの電話レイアウトを選択すると、**DesignWidth** は 640、**DesignHeight** は 1136 になります。

画面の**幅**および**高さ**プロパティの数式で使用される場合、**DesignWidth** および **DesignHeight** は設計するアプリの最小ディメンションとして考えることができます。 アプリで使用可能な実際の領域がこれら最小ディメンションよりも小さい場合、画面の**幅**および**高さ**プロパティの数式について、それらの値すべてが最小値よりも小さくないことを確認してください。 このような場合、ユーザーは画面のコンテンツをすべて表示するのにスクロールする必要があります。

アプリの **DesignWidth** および **DesignHeight**を確定した後は、(多くの場合) 各画面の**幅**および**高さ**プロパティの既定の数式を変更する必要はありません。 このトピックの後半で、これらの数式をカスタマイズする場合について説明します。

## <a name="use-formulas-for-dynamic-layout"></a>動的なレイアウトに数式を使用する

応答性に優れた設計を作成するには、絶対座標値 (定数) の代わりに数式を使用して、各コントロールの位置とサイズを設定します。 これらの数式は、全体的な画面サイズまたは画面上のその他のコントロールとの相対的な観点から、各コントロールの位置とサイズを表します。

> [!IMPORTANT]
> コントロールの **X**、**Y**、**幅**、および**高さ** プロパティに対して数式を記述した後、キャンバス エディターでコントロールをドラッグした場合、数式は定数値で上書きされます。 数式を使用して動的レイアウトを実現する場合は、コントロールをドラッグすることは避けてください。

最も簡単なケースは、1 つのコントロールが画面全体を占める場合です。 この効果を作成するには、コントロールのプロパティを次の値に設定します。

| プロパティ      | 値            |
|--------|---------------|
| **X**      | `0`             |
| **Y**      | `0`             |
| **幅**  | `Parent.Width`  |
| **高さ** | `Parent.Height` |

これらの式は、**Parent** 演算子を使用します。 画面に直接配置されたコントロールの場合、**Parent** は画面を参照します。 これらのプロパティ値を使用すると、コントロールは画面の左上の隅 (0, 0) に表示され、画面と同じ**幅**および**高さ**になります。

このトピックの後半で、これらの原則 (および **Parent** 演算子) を適用して、ギャラリー、グループ コントロール、およびコンポーネントなど、その他のコンテナー内にコントロールを配置します。

代替策として、コントロールが画面の上半分のみを占めるようにすることができます。 この効果を作成するには、**高さ**プロパティを **Parent.Height** / 2 に設定し、その他の式は変更しないでおきます。

2 番目のコントロールが同じ画面の下半分を占めるようにする場合、その数式を作成するのに少なくとも 2 つの方法があります。 簡単にするため、次の方法を使用できます。

| コントロール​​ | プロパティ | 計算式           |
|-|----------|-------------------|
| **Upper** | **X**        | `0`                 |
| **Upper** | **Y**        | `0`                 |
| **Upper** | **幅**    | `Parent.Width`      |
| **Upper** | **高さ**   | `Parent.Height / 2` |
| **Lower** | **X**        | `0`                 |
| **Lower** | **Y**        | `Parent.Height / 2` |
| **Lower** | **幅**    | `Parent.Width`      |
| **Lower** | **高さ**   | `Parent.Height / 2` |

![上位および下位のコントロール](media/create-responsive-layout/dynamic-layout.png)

この構成で必要な効果を実現できますが、コントロールの相対サイズについて気が変わった場合、各数式を編集する必要があります。 たとえば、上部のコントロールが画面の上部 3 分の 1 だけを占め、下部のコントロールが下部 3 分の 2 を占めるように決定することができます。 

その効果を作成するには、**上部**のコントロールの**高さ**プロパティ、および**下部**のコントロールの **Y** および**高さ**プロパティを更新する必要があります。 代わりに、この例のように、**上部**のコントロール (およびそれ自身) の観点から**下部**のコントロールに対する数式を記述することを検討します。


| コントロール​​ | プロパティ | 計算式           |
|-|----------|-------------------|
| **Upper** | **X**        | `0`                 |
| **Upper** | **Y**        | `0`                 |
| **Upper** | **幅**    | `Parent.Width`      |
| **Upper** | **高さ**   | `Parent.Height / 2` |
| **Lower** | **X**        | `0`                       |
| **Lower** | **Y**        | `Upper.Y + Upper.Height`  |
| **Lower** | **幅**    | `Parent.Width`            |
| **Lower** | **高さ**   | `Parent.Height - Lower.Y` |

![上部および下部のコントロールの相対サイズ](media/create-responsive-layout/dynamic-layout2.png)

これらの数式を使用すると、**上部**のコントロールの**高さ**プロパティを変更するだけで、画面の高さのさまざまな端数を表すことができます。 **下部**のコントロールは自動的に移動し、変更に合わせてサイズを変更します。

**C** という名前のコントロールと、親または兄弟コントロールで **D** という名前のコントロールとの間における共通のレイアウト関係を表すのに、これらの数式パターンを使用できます。

| C とその親との関係 | プロパティ | 計算式 | 図 |
|--|--|--|--|
| *N* のマージンを残して、親の幅いっぱいを占める **C** | **X**| `N` | ![親の幅いっぱいを占める C の例](media/create-responsive-layout/c1.png) |
|  | **幅** | `Parent.Width - (N * 2)` |  |
| *N* のマージンを残して、親の高さいっぱいを占める **C** | **Y** | `N` | ![親の高さいっぱいを占める C の例](media/create-responsive-layout/c2.png) |
|  | **高さ** | `Parent.Height - (N * 2)` |  |
| *N* のマージンを残して親の右端に揃えた **C** | **X** | `Parent.Width - (C.Width + N)` | ![親の端に揃えた C の例](media/create-responsive-layout/c3.png) |
| *N* のマージンを残して親の下に揃えた **C** | **Y** | `Parent.Height - (C.Height + N)` | ![親の端に揃えた C の例](media/create-responsive-layout/c4.png) |
| 親の水平方向中央に揃えた **C** | **X** | `(Parent.Width - C.Width) / 2` | ![親の水平方向中央に揃えた C の例](media/create-responsive-layout/c5.png) |
| 親の垂直方向中央に揃えた **C** | **Y** | `(Parent.Height - C.Height) / 2` | ![親の垂直方向中央に揃えた C の例](media/create-responsive-layout/c6.png) |

| C および D の間の関係 | プロパティ | 計算式 | 図 |
|--|--|--|--|
| **D** と同じ幅をもち、**D** と水平方向に揃えた **C** | **X** | `D.X` | ![パターンの例](media/create-responsive-layout/d1.png) |
|  | **幅**    | `D.Width` |  |
| **D** と同じ高さをもち、**D** と垂直方向に揃えた **C**  | **Y** | `D.Y` | ![パターンの例](media/create-responsive-layout/d2.png) |
|  | **高さ** | `D.Height` |  |
| **C** の右端と **D** の右端を揃える | **X** | `D.X + D.Width - C.Width` | ![パターンの例](media/create-responsive-layout/d3.png) |
| **C** の下と **D** の下を揃える | **Y** | `D.Y + D.Height - C.Height` | ![パターンの例](media/create-responsive-layout/d4.png) |
| **D** に対して相対的に水平方向中央に揃えた **C** | **X** | `D.X + (D.Width - C.Width) / 2`  | ![パターンの例](media/create-responsive-layout/d5.png) |
| **D** に対して相対的に垂直方向中央に揃えた **C** | **Y** | `D.Y + (D.Height - C.Height) /2` | ![パターンの例](media/create-responsive-layout/d6.png) |
| 間隔 N を残して **D** の右に配置した **C** | **X** | `D.X + D.Width + N` | ![パターンの例](media/create-responsive-layout/d7.png) |
| 間隔 *N* を残して **D** の下に配置した **C**             | **Y** | `D.Y + D.Height + N` | ![パターンの例](media/create-responsive-layout/d8.png) |
| **D** と親の右端との間のスペースいっぱいを占める **C** | **X** | `D.X + D.Width` | ![パターンの例](media/create-responsive-layout/d9.png) |
|  | **幅** | `Parent.Width - C.X` |  |
| **D** と親の下端との間のスペースいっぱいを占める **C** | Y | `D.Y + D.Height` | ![パターンの例](media/create-responsive-layout/d10.png) |
| | **高さ** | ```Parent.Height - D.Y```

## <a name="hierarchical-layout"></a>階層的なレイアウト

より多くのコントロールを含む画面を作成する場合、画面または兄弟コントロールに対してではなく、親コントロールに対して相対的にコントロールを配置する方が便利 (または必要) です。 コントロールを階層構造に編成することにより、数式の記述および保守が簡単になります。

### <a name="galleries"></a>ギャラリー

アプリでギャラリーを使用する場合、ギャラリーのテンプレート内でコントロールをレイアウトする必要があります。 ギャラリー テンプレートを参照する **Parent** 演算子を使用する数式を記述して、これらのコントロールを配置することができます。 ギャラリー テンプレート内のコントロールの数式で、**Parent.TemplateHeight** および **Parent.TemplateWidth** プロパティを使用し、ギャラリーの全体的なサイズを参照する **Parent.Width** および **Parent.Height** は使用しません。

![テンプレートの幅と高さを示す垂直ギャラリー](media/create-responsive-layout/gallery-vertical.png)

### <a name="container-control"></a>コンテナー コントロール

試験的な機能である**コンテナー** コントロールを親コントロールとして使用します。 この機能をオンにするには、**ファイル** > **アプリの設定** > **詳細設定**を選択します。

画面上部のヘッダーの例を検討します。 ヘッダーにはタイトルおよびユーザーが操作できる複数のアイコンがあるのが一般的です。 **コンテナー** コントロールを使用するこのようなヘッダーは、**ラベル** コントロールおよび 2 つの**アイコン** コントロールを含めることによって作成できます。

![グループを使用したヘッダーの例](media/create-responsive-layout/header-group.png)

これらのコントロールのプロパティを、次の値に設定します。

| プロパティ | ヘッダー​​ | メニュー | 閉じる​​ | タイトル |
|--|--|--|--|--|
| **X** | `0`  | `0` | `Parent.Width - Close.Width` | `Menu.X + Menu.Width` |
| **Y** | `0` | `0` | `0` | `0` |
| **幅**  | `Parent.Width` | `Parent.Height` | `Parent.Height` | `Close.X - Title.X` |
| **高さ** | `64` | `Parent.Height` | `Parent.Height` | `Parent.Height` |

**ヘッダー** コントロールの場合、`Parent` は画面を参照します。 その他については、`Parent` は**ヘッダー** コントロールを参照します。

これらの数式を記述したら、プロパティの数式を変更することにより、**ヘッダー** コントロールのサイズまたは位置を調整できます。 子コントロールのサイズと位置は、それに合わせて自動的に調整されます。

### <a name="components"></a>コンポーネント

Components という名前の別の試験的な機能を使用する場合、構成要素を作成し、アプリ全体で再利用することができます。 **コンテナー** コントロールと同様に、コンポーネント内に配置するコントロールの位置とサイズの数式は、コンポーネントのサイズを参照する `Parent.Width` および `Parent.Height` に基づいている必要があります。 詳細については、[コンポーネントの作成](create-component.md) を参照してください。

## <a name="adapting-layout-for-device-size-and-orientation"></a>デバイスのサイズと向きに合わせてレイアウトを調整する

ここまでで、数式を使用して、コントロールを相互に揃えたまま、使用可能なスペースに応じて各コントロールのサイズを変更する方法を学習しました。 しかし、さまざまなデバイスのサイズと方向に応じて、レイアウトを大幅に変更する必要がある場合があります。 たとえば、デバイスを縦向きから横向きに回転させた場合、垂直レイアウトから水平レイアウトに切り替えることができます。 大きいデバイスでは、より多くのコンテンツを表示したり再編したりして、より魅力的なレイアウトを提供することができます。 小さいデバイスでは、複数の画面にコンテンツを分割する必要があります。

### <a name="device-orientation"></a>デバイスの向き

このトピックの前半で説明したように、画面の**幅**および**高さ**プロパティの既定の数式は、ユーザーがデバイスを回転させた場合に適切なエクスペリエンスを提供するとは限りません。 たとえば、縦向きの携帯電話用に設計されたアプリの場合、**DesignWidth** は 640、**DesignHeight** は 1136 です。 同じアプリで、携帯電話が横向きの場合、プロパティ値は次のようになります。

- 画面の**幅**プロパティは `Max(App.Width, App.DesignWidth)` に設定されます。 アプリの**幅** (1136) はその **DesignWidth** (640) よりも大きいので、数式は 1136 と評価されます。
- 画面の**高さ**プロパティは `Max(App.Height, App.DesignHeight)` に設定されます。 アプリの**高さ** (640) はその **DesignHeight** (1136) よりも小さいので、数式は 1136 と評価されます。

画面の**高さ**が 1136 で、(この方向で) デバイスの高さが 640 の場合、ユーザーは画面を垂直方向にスクロールしてすべてのコンテンツを表示させる必要があり、必要なエクスペリエンスではなくなることがあります。

画面の**幅**および**高さ**プロパティをデバイスの向きに合わせるには、次の数式を使用することができます。

**幅** = `Max(App.Width, If(App.Width < App.Height, App.DesignWidth, App.DesignHeight))`

**高さ** = `Max(App.Height, If(App.Width < App.Height, App.DesignHeight, App.DesignWidth))`

これらの数式は、デバイスの幅が高さよりも小さいか (縦向き)、または高さより大きいか (横向き) に基づいて、アプリの **DesignWidth** および **DesignHeight** の値を切り替えます。

画面の**幅**および**高さ**の数式を調整した後、画面内のコントロールを再編して、使用可能なスペースをより効果的に使用することもできます。 たとえば、2 つのコントロールのそれぞれが画面の半分を占める場合、縦向きの場合には縦に積み重ね、横向きの場合には横に並べて配置します。

画面の**向き**プロパティを使用して、画面を垂直方向に配置するかまたは水平方向に配置するかを決定します。

> [!NOTE]
> 横向きでは、**上部**および**下部**のコントロールは、左および右のコントロールとして表示されます。

| コントロール​​ | プロパティ | 計算式 |
|--|----------|---|
| **Upper** | **X** | `0` |
| **Upper** | **Y** | `0` |
| **Upper** | **幅** | `If(Parent.Orientation = Layout.Vertical, Parent.Width, Parent.Width / 2)` |
| **Upper** | **高さ**   | `If(Parent.Orientation = Layout.Vertical, Parent.Height / 2, Parent.Height)` |
| **Lower** | X | `If(Parent.Orientation = Layout.Vertical, 0, Upper.X + Upper.Width)`  |
| **Lower** | Y | `If(Parent.Orientation = Layout.Vertical, Upper.Y + Upper.Height, 0)` |
| **Lower** | **幅** | `Parent.Width - Lower.X` |
| **Lower** | **高さ** | `Parent.Height - Lower.Y` |

![縦向きに適応する式](media/create-responsive-layout/portrait.png)

![横向きに適応する式](media/create-responsive-layout/landscape.png)

### <a name="screen-sizes-and-breakpoints"></a>画面サイズおよびブレークポイント

デバイスのサイズに基づいてレイアウトを調整することができます。 画面の**サイズ** プロパティにより、現在のデバイス サイズを分類します。 サイズは正の整数で、ScreenSize 型は、読みやすくするために名前付き定数を提供します。 この表は、定数の一覧を示します。

| 定数              | 値 | 代表的なデバイスの種類 (既定のアプリ設定を使用) |
|-----------------------|-------|--------------------------------------------------|
| ScreenSize.Small      | 1     | 電話番号                                            |
| ScreenSize.Medium     | 2     | タブレット PC、縦向き                          |
| ScreenSize.Large      | 3     | タブレット PC、横向き                        |
| ScreenSize.ExtraLarge | 4     | デスクトップ コンピューター                                 |

これらのサイズを使用して、アプリのレイアウトを決定します。 たとえば、電話サイズのデバイスではコントロールを非表示にし、それ以外の場合は表示したい場合、コントロールの**表示**プロパティを次の数式に設定します。

`Parent.Size >= ScreenSize.Medium`

この式は、サイズが中以上の場合 **true** に、それ以外の場合は **false** に評価されます。

コントロールが画面サイズに基づいて画面幅のさまざまな端数部分を占めるようにするには、コントロールの**幅**プロパティをこの式に設定します。

```powerapps-dot
Parent.Width *  
    Switch(Parent.Size,  
        ScreenSize.Small, 0.5,  
        ScreenSize.Medium, 0.3,  
        0.25)
```
この数式は、小さな画面の場合、画面幅の半分、中の画面の場合、画面幅の 3/10、その他のすべての画面の場合、画面幅の 1/4 にコントロールの幅を設定します。

## <a name="custom-breakpoints"></a>カスタム ブレークポイント

画面の**サイズ** プロパティは、画面の**幅**プロパティをアプリの **SizeBreakpoints** プロパティの値と比較することにより計算されます。 このプロパティは、名前付き画面サイズを区切る幅のブレークポイントを示す、数値の単一列テーブルです。

タブレット PC または Web 用に作成されたアプリの場合、アプリの **SizeBreakpoints** プロパティの既定値は **[600, 900, 1200]** になります。 携帯電話用に作成されたアプリの場合、値は **[1200, 1800, 2400]** になります。 (電話用アプリはその他のアプリで使用される座標を効率的に 2 倍にする座標を使用するため、電話アプリ用の値は 2 倍になります。)

![App.SizeBreakpoints プロパティの既定値](media/create-responsive-layout/default-breakpoints.png)

アプリの **SizeBreakpoints** プロパティの値を変更することにより、アプリのブレークポイントをカスタマイズすることができます。 ツリー ビューで**アプリ**を選択して、プロパティ リストの **SizeBreakpoints** を選択し、数式バーの値を編集します。 アプリに必要な数だけブレークポイントを作成できますが、名前付き画面サイズに対応するのは 1 〜 4 のサイズのみです。 数式では、数値 (5、6 など) により、ExtraLarge を超えるサイズを参照できます。

少ないブレークポイントを指定することもできます。 たとえば、アプリで 3 つのサイズだけ必要な場合 (ブレークポイントは 2 つ) は、可能な画面サイズは小、中、および大になります。

## <a name="known-limitations"></a>既知の制限

作成キャンバスは、作成されたサイズ計算式に応答しません。 応答可能な動作をテストするには、アプリを保存して公開し、さまざまなサイズと方向のデバイスまたはブラウザー ウィンドウ上で開きます。

コントロールの **X**、**Y**、**幅**、および**高さ**プロパティに式や数式を記述した場合、後でコントロールを別の場所にドラッグしたり、コントロールの境界線をドラッグすることによりサイズを変更した場合、それらの式または数式は上書きされます。
