---
title: データ型 |Microsoft Docs
description: キャンバスアプリのデータ型
author: gregli-msft
manager: kvivek
ms.service: powerapps
ms.topic: reference
ms.custom: canvas
ms.reviewer: anneta
ms.date: 05/19/2019
ms.author: gregli
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: 10c5ff9eaa709ab950fa3c3f0efce4f859a71dbc
ms.sourcegitcommit: 5899d37e38ed7111d5a9d9f3561449782702a5e9
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/17/2019
ms.locfileid: "71037988"
---
# <a name="data-types-in-canvas-apps"></a>キャンバスアプリのデータ型

情報は、スプレッドシートのセルとよく似た小さな不連続値でアプリを経由して流れます。 たとえば、**誕生日**フィールドと**記念**日フィールドのデータは、どちらも年、月、日を含む**日付**値としてフローします。 アプリでは、これらの値の書式を設定し、それぞれに適切な入力を制約し、値をデータベースと共有する方法を認識しています。 誕生日は記念者とは異なりますが、システムによってまったく同じ方法で処理されます。 この場合、[データ型](https://en.wikipedia.org/wiki/Data_type)の例として**日付**が使用されます。

この記事では、キャンバスアプリでサポートされるデータ型の詳細について説明します。 アプリが外部データソースに接続すると、そのソース内の各データ型は、キャンバスアプリのデータ型にマップされます。

| データの種類 | 説明 | 使用例 |
|-----------|-------------|---------|
| **Boolean** | *True*または*false*の値。  **は、If**、 **Filter**などの関数で比較なしで直接使用できます。  | *true* |
| **Color** | アルファチャネルを含むカラー指定。 | **Color.Red**<br>**ColorValue ("#102030")**<br>**RGBA (255、128、0、0.5)** |
| **Currency** | 浮動小数点数で格納される通貨値。 通貨の値は、通貨書式オプションを使用した数値と同じです。  | **123**<br>**4.56** |
| **Date** | アプリのユーザーのタイムゾーンで、時刻を含まない日付。 | **日付 (2019、5、16)** |
| **DateTime** | アプリのユーザーのタイムゾーンで、時刻を含む日付。 | **DateTimeValue ("5 月16日 2019 1:23:09 PM")** |
| **GUID** | [グローバル一意識別子](https://en.wikipedia.org/wiki/Universally_unique_identifier)。 | **GUID ()**<br>**GUID ("123e4567e89b-12d3-a45647 26655440000")** |
| **ハイパーリンク** | ハイパーリンクを保持するテキスト文字列。 | **"http://powerapps.microsoft.com"** |
| **Image** | .Jpeg、.png、svg、.gif、またはその他の一般的な web イメージ形式のイメージに対する[ユニバーサルリソース識別子 (URI)](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier)テキスト文字列。 | アプリリソースとして追加された**Myimage**<br>**"https://northwindtraders.com/logo.jpg"**<br>**"appres://blobmanager/7b12ffa2..."** |
| **メディア** | ビデオまたはオーディオの記録に対する URI テキスト文字列。 | アプリリソースとして追加された**Myvideo**<br>**"https://northwindtraders.com/intro.mp4"**<br>**"appres://blobmanager/3ba411c..."** |
| **数値** | 浮動小数点数。 | **123**<br>**-4.567**<br>**8.903e121** |
| **オプションセット** | 一連のオプションから、数値で支えられた選択。 このデータ型は、ローカライズ可能なテキストラベルと数値を組み合わせたものです。 アプリにラベルが表示され、数値が格納され、比較に使用されます。 | **この項目。 OrderStatus** |
| **録音** | データ値のレコード。 この複合データ型には、このトピックに記載されている他のデータ型のインスタンスが含まれています。 詳細は[テーブルを操作](../working-with-tables.md)する。 | **全社"Northwind Traders"、<br>スタッフ:35、 <br>非営利: false}** |
| **レコード参照** | エンティティ内のレコードへの参照。 このような参照は、多くの場合、ポリモーフィックな検索で使用されます。 詳細は[参照を使用して作業](../working-with-references.md)する。| **最初の (アカウント)。責任** |
| **テーブル** | レコードのテーブル。  すべてのレコードは、同じデータ型のフィールドに対して同じ名前を持つ必要があり、省略したフィールドは*空白*として扱われます。 この複合データ型には、このトピックに記載されている他のデータ型のインスタンスが含まれています。 詳細は[テーブルを操作](../working-with-tables.md)する。 | **テーブル ({FirstName:"Sidney",<br>LastName:"Higa"}, <br>{FirstName:"ナンシー",<br>LastName:"Anderson"})**
| **Text** | Unicode テキスト文字列。 | **"Hello, World"** |
| **Time** | アプリのユーザーのタイムゾーンにおける、日付のない時刻。 | **時間 (11, 23, 45)** |
| **2つのオプション** | ブール値によってサポートされる2つのオプションのセットから選択します。 このデータ型は、ローカライズ可能なテキストラベルとブール値を組み合わせたものです。 アプリにラベルが表示され、ブール値が保存され、比較に使用されます。 | **この項目。課税対象** |

これらのデータ型の多くは類似しており、基になる表現は同じです。たとえば、**ハイパーリンク**フィールドが**テキスト**として扱われています。  追加のデータ型により、フォームやその他のコントロールでの既定のエクスペリエンスが向上します。

## <a name="blank"></a>空白

すべてのデータ型は、値を*空白*にすることができます (つまり、値はありません)。 "Null" という用語は、この概念のデータベースでよく使用されます。  

**Set**関数または**Patch**関数で**blank**関数を使用すると、変数またはフィールドを*空白*に設定できます。 たとえば、 **Set (x, Blank ())** は、グローバル変数**x**の値をすべて削除します。  

[**Isblank**](function-isblank-isempty.md)関数を使用して、*空白*の値をテストします。 [**結合**](function-isblank-isempty.md)関数を使用して、空以外*の値を*持つ可能性のある*空白*の値を置き換えます。

すべてのデータ型では*空白*がサポートされているため、**ブール**値と**2 つのオプション**のデータ型には、効果的に3つの値を指定できます。

## <a name="text-hyperlink-image-and-media"></a>テキスト、ハイパーリンク、画像、およびメディア

これらの4つのデータ型はすべて、 [Unicode](https://en.wikipedia.org/wiki/Unicode)テキスト文字列に基づいています。

### <a name="image-and-media-resources"></a>イメージとメディアのリソース

**[ファイル]** メニューを使用して、イメージ、ビデオ、およびオーディオファイルをアプリリソースとして追加できます。 インポートされたファイルの名前は、アプリのリソース名になります。 この図では、 **nwindlogo**という名前の Northwind Traders のロゴがアプリに追加されています。

![](media/data-types/nwind-resource.png)

このリソースをアプリで使用するには、[**イメージ**](../controls/control-image.md)コントロールの**image**プロパティで次のように指定します。

![](media/data-types/nwind-image.png)

### <a name="uris-for-images-and-other-media"></a>イメージとその他のメディアの Uri

[**ラベル**](../controls/control-text-box.md)コントロールの**Text**プロパティを**nwindlogo**に設定することにより、その最後の例をもう少し掘り下げてみることができます。 ラベルには、テキスト文字列が表示されます。

![](media/data-types/nwind-text.png)

キャンバスアプリは、クラウド内にあるか、またはアプリリソースとして追加されたかにかかわらず、各イメージまたは他のメディアファイルを URI テキスト文字列で参照します。

たとえば、イメージコントロールの**image**プロパティは、アプリリソースだけでなく、web 上のイメージ ("https://northwindtraders.com/logo.jpg" など) へのリンクも受け入れます。 このプロパティは、次の例のように、[データ URI スキーム](https://en.wikipedia.org/wiki/Data_URI_scheme)を使用するインラインイメージも受け入れます。

```powerapps-dot
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFAQMAAACtnVQoAAAABlBMVEUAAAB0J3UMNU6VAAAAAXRSTlMAQObYZgAAABRJREFUCNdjUGJgCGVg6GgAkkA2AA8/AffqCEBsAAAAAElFTkSuQmCC"
```

この URI は、2つの紫色のひし形のスケールアップされたバージョンを表示します。

![](media/data-types/double-diamonds.png)

イメージコントロールの**image**プロパティをカメラコントロールの**Photo**プロパティに設定した場合、[**カメラ**](../controls/control-camera.md)コントロールでキャプチャされた最新のイメージを表示できます。 アプリはイメージをメモリ内に保持し、カメラコントロールの**Photo**プロパティはイメージへの URI 参照を返します。 たとえば、写真を撮ると、カメラの**Photo**プロパティが **"appres://blobmanager/7b12ffa2ea4547e5b3812cb1c7b0a2a0/1"** を返す可能性があります。

URI を使用して、データベースに格納されているイメージまたは別のメディアファイルを参照します。 そうすることで、実際に必要になるまで、アプリは実際のデータを取得しません。 たとえば、Common Data Service エンティティ内の添付ファイルは **"appres://datasources/Contacts/table/..."** を返す場合があります。カメラの例と同様に、このイメージを表示するには、イメージコントロールの**image**プロパティをこの参照に設定します。これにより、バイナリデータが取得されます。

画像などのメディアデータ型をデータベースに保存すると、アプリは URI 参照ではなく、実際のイメージまたはメディアデータを送信します。

### <a name="size-limits"></a>サイズ制限

テキスト文字列および Uri として、これらのデータ型の長さには、事前設定された制限がありません。

これらのデータ型で参照されるバイナリデータにも、サイズに関する事前設定された制限はありません。 たとえば、 **"appres://"** として参照されているカメラコントロールを通じてキャプチャされたイメージは、デバイスのカメラを muster できるため、大きな解像度にすることができます。 メディアファイルの解像度、フレームレート、およびその他の属性はデータの種類によって制限されませんが、メディアの再生とキャプチャに固有の制御には、独自の制限が適用される場合があります。

ただし、すべてのデータサイズは、アプリで使用可能なメモリの量によって決まります。 デスクトップコンピューター上で実行されているブラウザーは、一般に 100 mb を超えるデータをサポートしています。 ただし、携帯電話などのデバイスで使用可能なメモリの量は、通常は 30-70 mb の範囲で非常に低くなる可能性があります。 アプリがこれらの制限内で実行されるかどうかを判断するには、実行するすべてのデバイスで共通のシナリオをテストします。

ベストプラクティスとして、データをメモリ内に保持するのは必要な限りです。 できる限り早くデータベースに画像をアップロードします。アプリのユーザーが要求した場合にのみ、イメージをダウンロードします。

## <a name="number-and-currency"></a>数値と通貨

**数値**および**通貨**データ型では、 [IEEE 754 倍精度浮動小数点標準](https://en.wikipedia.org/wiki/IEEE_754)が使用されます。 この標準では、– 1.79769 x 10<sup>308</sup>から 1.79769 x 10<sup>308</sup>まで、非常に大きな範囲の数値を使用できます。 表すことができる最小値は、5 x 10<sup>~ 324</sup>です。

キャンバスアプリは、-9007199254740991 (– (2<sup>53</sup> – 1)) ~ 9007199254740991 (2<sup>53</sup> – 1) の範囲の整数 (または整数) を正確に表すことができます。 この範囲は、データベースで一般的に使用される32ビット (または4バイト) の整数データ型よりも大きくなります。 ただし、キャンバスアプリは64ビット (または8バイト) の整数データ型を表すことができません。 テキストフィールドに数値を格納するか、計算列を使用してテキストフィールドに数値のコピーを作成し、キャンバスアプリの**テキスト**データ型にマップすることができます。 このようにして、これらの値を保持し、表示し、入力し、それらを比較して等しいかどうかを判断することができます。ただし、この形式で数値計算を実行することはできません。

浮動小数点演算は概数であるため、ドキュメント化された多くの例で、予期しない結果になることがあります。 数式**55/100 * 100**が正確に55を返し、 **(55/100 * 100)-55**を返して、正確に0を返すことが予想される場合があります。 ただし、2番目の数式では 7.1054 x 10<sup>– 15</sup>が返されますが、これは非常に小さいが0ではありません。 この小さな違いによって、通常は問題が発生することはなく、アプリは結果を表示するときにそれを丸めます。 ただし、小さい相違点は、後続の計算では複雑になり、間違った回答が表示される可能性があります。

多くの場合、データベースシステムは、通貨を格納して計算を実行します。10進数値演算では、範囲が小さくなりますが、精度をより細かく制御できます。 既定では、キャンバスアプリは、浮動小数点値との間で通貨をマップします。したがって、結果は、ネイティブの decimal データ型で実行される計算とは異なる場合があります。 このような不一致によって問題が発生する場合は、このセクションで既に説明した大きな整数の場合と同様に、これらの値を**テキスト**として扱うことができます。

## <a name="date-time-and-datetime"></a>Date、Time、および DateTime

### <a name="time-zones"></a>タイムゾーン

日付/時刻値は、次のカテゴリに分類されます。

- **ユーザーローカル**:これらの値は[UTC (世界協定時刻)](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)で格納されますが、アプリユーザーのタイムゾーンは、アプリがこれらの値を表示する方法と、アプリのユーザーがこれらの値をどのように指定するかに影響します。 例として、日本のユーザーに対しては、カナダのユーザーに対して同じモーメントが表示されます。
- **タイムゾーン非依存**:アプリはこれらの値を同じ方法で表示し、アプリユーザーはタイムゾーンに関係なく同じ方法でそれらを指定します。 日本のユーザーと同じようにカナダのユーザーにも同じように見えます。 アプリの作成者は、アプリケーションが異なるタイムゾーンで実行されることを期待していない場合、これらの値は全体的に単純であるため、これらの値を使用します。

次の表は、いくつかの例を示しています。

| 日付/時刻型 | データベースに格納されている値 | UTC の7時間前の値が表示され、入力されました | 値が表示され、UTC の4時間前に入力されました |
|--------------------------|------------------------------|------------------------------|
| **ユーザーローカル** | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 土曜日、&nbsp;2019&nbsp;年&nbsp;5 月18日<br>9:00 PM | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>8:00 AM |
| **タイムゾーン非依存** | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 

**ユーザーのローカル**の日付/時刻の場合、キャンバスアプリはブラウザーまたはデバイスのタイムゾーンを使用しますが、モデル駆動型アプリでは Common Data Service のユーザー設定が使用されます。 これらの設定は通常一致しますが、これらの設定が異なる場合は結果が異なります。

ローカル時刻を UTC に変換してから再度返すには、 [**DateAdd**](function-dateadd-datediff.md)関数と[**TimeZoneInformation**](function-dateadd-datediff.md)関数を使用します。  これらの関数については、ドキュメントの最後にある例を参照してください。

### <a name="numeric-equivalents"></a>同等の数値

キャンバスアプリでは、**ユーザーローカル**または**タイムゾーン**が UTC に依存しているかどうかにかかわらず、すべての日付/時刻値が保持され、計算されます。 アプリでは、アプリのユーザーのタイムゾーンを表示するときと、アプリのユーザーが指定した時刻に基づいて値が変換されます。

キャンバスアプリがデータソースから**タイムゾーンに依存しない**値を読み取るか、データソースにそのような値を書き込むと、アプリは自動的に値を調整して、アプリのユーザーのタイムゾーンを補正します。 その後、アプリはその値を UTC 値として扱い、アプリ内の他のすべての日付/時刻値と一致させることができます。 この補正のため、アプリがアプリユーザーのタイムゾーンの UTC 値を調整するときに、元の**タイムゾーンに依存**しない値が表示されます。

この動作は、 [**value**](function-value.md)関数を使用して日付/時刻値の基になる数値にアクセスすることにより、より厳密に観察できます。 この関数は、1970 00:00: 00.000 UTC 以降のミリ秒数として日付/時刻値を返します。

すべての日付/時刻値は UTC で保持されるため、数式の**値 (date (1970, 1, 1))** は世界のほとんどの部分で0を返しません。これは、 **DATE**関数が utc で日付を返すためです。 たとえば、数式は、UTC からのオフセットが8時間のタイムゾーンで2880万を返します。 この数値には、8時間のミリ秒数が反映されます。

上記の例に戻ります。

| 日付/時刻型 | データベースに格納されている値 | UTC の7時間前の値が表示され、入力されました | **Value**関数の戻り値 |
|--------------------------|------------------------------|------------------------------|
| **ユーザーローカル** | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 土曜日、&nbsp;2019&nbsp;年&nbsp;5 月18日<br>9:00 PM | 1558238400000<br> (日曜日、&nbsp;5&nbsp;月 19&nbsp;日、2019年5月19日<br>4:00 AM UTC) |
| **タイムゾーン非依存** | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM | 日曜日、&nbsp;2019&nbsp;年&nbsp;5 月19日<br>4:00 AM |1558263600000<br> (日曜日、&nbsp;5&nbsp;月 19&nbsp;日、2019年5月19日<br>11:00 AM UTC) |

### <a name="converting-unix-times"></a>Unix の時刻の変換

Unix では、00:00:00 1970 年1月1日からの経過秒数が反映されます。 キャンバスアプリでは秒単位ではなくミリ秒が使用されるため、2つの間で変換するには、1000で乗算または除算します。

たとえば、Unix では、2001年9月9日の 01:46:40 UTC が10億として表示されます。 この日付/時刻値をキャンバスアプリに表示するには、その数値を1000で乗算して、ミリ秒に変換し、[**テキスト**](function-text.md)関数で使用します。 数式の**テキスト (10億 * 1000, DateTimeFormat)** は、文字列**2001-09-09t01:46: 40.000 z**を返します。

ただし、UTC からの-7 時間オフセット (UTC の7時間前) で**DateTimeFormat**を使用している場合、この関数は、**土曜日、9月8日、2001 18:46:40**を返します。 この結果、ローカルタイムゾーンに基づいて**DateTime**値が正しく表示されます。

Unix 時刻に変換するには、結果を1000で**値**で割ります。
<br>**RoundDown (Value (UnixTime)/1000, 0)**

追加の計算または PowerApps 内での表示のために、**日付**値に Unix 時刻が必要な場合は、次の式を使用します。
<br>**DateAdd (Date (1970, 1, 1), UnixTime, Seconds)**

### <a name="sql-server"></a>SQL Server

SQL Server には、タイムゾーンオフセットを含まない[ **Datetime**、 **Datetime2**、およびその他の日付/時刻データ型](https://docs.microsoft.com/sql/t-sql/functions/date-and-time-data-types-and-functions-transact-sql?view=sql-server-2017)があり、どのタイムゾーンが含まれているかは示されません。 キャンバスアプリでは、これらの値は UTC で格納され、**ユーザーのローカル**として扱われます。 値がタイムゾーンに依存しないように指定されている場合は、 [**TimeZoneOffset**](function-dateadd-datediff.md#converting-to-utc)関数を使用して、UTC 翻訳に対して正しいことを確認します。

キャンバスアプリは、値をアプリの内部 UTC 表記に変換するときに、 **Datetimeoffset**フィールドに含まれるタイムゾーン情報を使用します。 アプリは、データを書き込むときに、常にタイムゾーン (ゼロのタイムゾーンオフセット) として UTC を使用します。

キャンバスアプリ[ISO 8601 期間形式](https://en.wikipedia.org/wiki/ISO_8601#Durations)のテキスト文字列として SQL Server の[**時刻**](https://docs.microsoft.com/sql/t-sql/data-types/time-transact-sql)データ型の値の読み取りと書き込みを行います。 たとえば、この文字列形式を解析し、 [**time**](function-date-time.md)関数を使用してテキスト文字列 **"PT2H1M39S"** を**時刻**値に変換する必要があります。

```powerapps-dot
First(
    ForAll(
        MatchAll( "PT2H1M39S", "PT(?:(?<hours>\d+)H)?(?:(?<minutes>\d+)M)?(?:(?<seconds>\d+)S)?" ),
        Time( Value( hours ), Value( minutes ), Value( seconds ) )
    )
).Value
```

### <a name="mixing-date-and-time-information"></a>日付と時刻の情報の混合

**Date**、 **Time**、および**DateTime**の名前は異なりますが、日付と時刻について同じ情報を保持します。 

**日付**値には、時刻情報を含めることができます。通常は午前0時です。 **時刻**値には、通常1970年1月1日の日付情報を格納できます。 また Common Data Service は、時刻情報を**日付のみ**のフィールドと共に格納しますが、既定では日付情報のみを表示します。 同様に、キャンバスアプリでは、これらのデータ型を区別して既定の書式とコントロールを判別することがあります。

タイムゾーンやその他の変換によって結果が混乱する可能性があるため、日付と時刻の値を直接加算および減算することは推奨されません。 **Value**関数を使用して、最初に日付/時刻値をミリ秒に変換し、アプリユーザーのタイムゾーンを考慮するか、 [**DateAdd**](function-dateadd-datediff.md)関数と[**DateDiff**](function-dateadd-datediff.md)関数を使用してこれらの値のいずれかを追加または削除します。

## <a name="option-sets-and-two-options"></a>オプションセットと2つのオプション

オプションセットと2つのオプションのデータ型は、アプリユーザーが選択できる2つ以上の選択肢を提供します。 たとえば、**注文ステータス**オプションを設定すると、 **[新規]** 、 **[出荷]** 済み、 **[請求]** 済み、および **[終了]** を選択できます。 2つのオプションのデータ型では、2つの選択肢のみが提供されます。

これらの両方のデータ型には、テキスト文字列コンテキストでラベルが表示されます。 たとえば、コントロールの**Text**プロパティがそのオプションセットを参照する数式に設定されている場合、ラベルコントロールには、いずれかの注文ステータスオプションが表示されます。 オプションラベルは、異なる場所にあるアプリユーザー用にローカライズされている場合があります。

アプリユーザーがオプションを選択してその変更を保存すると、アプリはデータをデータベースに送信します。このデータは、言語に依存しない表現に格納されます。 オプションセットのオプションは、送信されて数値として格納され、2つのオプションのデータ型のオプションが送信され、ブール値として格納されます。

ラベルは、表示のみを目的としています。 ラベルは言語に固有であるため、直接比較を実行することはできません。 代わりに、各オプションセットには、基になる数値またはブール値で動作する列挙体があります。 たとえば、次の式は使用できません。

`If( ThisItem.OrderStatus = "Active", ...`

ただし、次の数式を使用できます。

`If( ThisItem.OrderStatus = OrderStatus.Active, ...`

グローバルオプションセット (エンティティが共有) の場合、オプションセットの列挙型の名前は、グローバルオプションセットの名前と一致します。 ローカルオプションセット (エンティティにスコープが設定されている場合) の名前には、エンティティの名前が含まれる場合があります。 この動作により、複数のエンティティが同じ名前のオプションセットを持つ場合に競合が回避されます。 たとえば、 **Accounts**エンティティに**orderstatus**オプションが設定されていて、その名前が**orderstatus (accounts)** である場合があります。 この名前には1つ以上のスペースとかっこが含まれているため、数式で参照する場合は、単一引用符で囲む必要があります。

また、2つのオプションの値は、ブール値としても動作します。 たとえば、 **TaxStatus**という名前の2つのオプションの値には、"**課税**対象" と "**非課税**" というラベルがあり、それぞれ*true*と*false*に対応しています。 例を示すために、次の数式を使用できます。

`If( ThisItem.Taxable = TaxStatus.Taxable, ...`

この同等の式を使用することもできます。

`If( ThisItem.Taxable, ...`