---
title: キャンバスアプリのコンポーネントライブラリを作成する |Microsoft Docs
description: キャンバスアプリの再利用可能なコンポーネントのライブラリ
author: yifwang
ms.service: powerapps
ms.topic: article
ms.date: 02/20/2020
ms.author: yifwang
ms.reviewer: tapanm
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: ae1b1b7bc7657d513921ddc2513696af9a808299
ms.sourcegitcommit: efb05dbd29c4e4fb31ade1fae340260aeba2e02b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2020
ms.locfileid: "78293134"
---
# <a name="component-library"></a>コンポーネントライブラリ

> [!IMPORTANT]
> この機能は依然としてパブリックプレビューの段階にあります。 詳細については、[試験的な機能とプレビュー機能](working-with-experimental.md)に関する記事を参照してください。

コンポーネントの作成に関する[概要](create-component.md)記事では、キャンバスアプリ内のコンポーネントについて説明します。 アプリ内でコンポーネントを作成するときに、再利用可能なコンポーネントのライブラリを作成することもできます。 アプリケーションメーカーは、コンポーネントライブラリを作成することにより、他のメーカーと簡単に1つ以上のコンポーネントを共有および更新できます。

コンポーネントライブラリは、次の操作を簡単に行うことができるコンポーネント定義のコンテナーです。

- コンポーネントを検出および検索します。
- 環境間で更新を発行します。
- 利用可能なコンポーネントの更新プログラムをアプリの製造元に通知します。 

> [!NOTE]
> コンポーネントライブラリは、アプリケーション間でコンポーネントを再利用するために推奨される方法です。 コンポーネントライブラリを使用する場合、アプリは使用するコンポーネントへの依存関係を維持します。 依存コンポーネントに対する更新プログラムが利用可能になると、アプリの作成者に警告が表示されます。 そのため、再利用可能な新しいコンポーネントはすべて、代わりにコンポーネントライブラリ内に作成する必要があります。 [あるキャンバスアプリから別のキャンバスアプリへのコンポーネントのインポート](create-component.md?#import-and-export-components)が許可されていた以前の Power Apps 機能は非推奨となります。

## <a name="difference-between-an-app-and-a-component-library"></a>アプリとコンポーネントライブラリの違い

コンポーネントライブラリは、再利用可能なコンポーネントの集中管理されたリポジトリを提供します。 

コンポーネントライブラリを作成する場合は、左側のナビゲーションの [ペインの**挿入**] が既定で [コンポーネント] タブに表示されます。 アプリを作成すると、このビューにはコンポーネントではなく画面が表示されます。 

コンポーネントライブラリ内の画面は、テストにのみ使用できます。 これにより、ライブラリの作成者は、作成されたコンポーネントを実際の画面ですばやくテストできます。また、コンポーネントが時間の経過と共に拡張されるため、更新動作を検証することもできます。 コンポーネントライブラリのコンポーネントを使用するには、コンポーネントライブラリを使用するアプリを作成する必要があります。

[再生] オプションを使用して、ライブラリ内の画面を使用してコンポーネントライブラリコンポーネントをプレビューすることができます。 [コンポーネント] タブを選択すると、[再生] オプションが無効になります。 Power Apps mobile を使用する場合、コンポーネントライブラリは表示されません。

> [!NOTE]
> この記事で説明するコンポーネントライブラリは、開発者や開発者がモデル駆動型アプリとキャンバスアプリのコードコンポーネントを作成できるようにする、Power Apps コンポーネントフレームワークとは異なります。 詳細については、「 [Power Apps コンポーネントフレームワークの概要」](https://docs.microsoft.com/powerapps/developer/component-framework/overview)を参照してください。

## <a name="working-with-component-library"></a>コンポーネントライブラリの操作

新しいコンポーネントライブラリを作成したり、同じインターフェイスから既存のコンポーネントライブラリを編集したりすることができます。 [Make.powerapps.com](https://make.powerapps.com)を参照し、 **[アプリ]** を選択して、 **[コンポーネントライブラリ]** を選択します。

![コンポーネントライブラリの作成または編集](./media/component-library/create-edit-component-library.png)

## <a name="create-an-example-component-library"></a>コンポーネントライブラリの例を作成する

コンポーネントライブラリ内にコンポーネントを作成する手順は、アプリ内でコンポーネントを作成する手順と同じです。 コンポーネントライブラリを作成します。 次に、[コンポーネントの概要の例](create-component.md#create-an-example-component)のように、コンポーネントを作成する手順を再利用します。 次に、コンポーネントライブラリを使用して、新しいアプリで再利用可能なコンポーネントを提供します。

1. [Make.powerapps.com](https://make.powerapps.com)にサインインします。

1. 左側のナビゲーションで **[アプリ]** を選択し、 **[コンポーネントライブラリ]** を選択して、 **[新しいコンポーネントライブラリ]** を選択します。

1. コンポーネントライブラリの名前を*メニューコンポーネント*として指定します。また、別の名前を指定することもできます。

1. コンポーネントを作成する手順については、 [「コンポーネントの概要」の例](create-component.md#create-an-example-component)を参照してください。 新しいコンポーネントライブラリが既に作成されているため、Power Apps Studio を開いたり、新しい空のアプリを作成したりする必要はありません。 手順2から始めます。 

    次の手順を実行してコンポーネントを作成した後、次の一連の手順に従って、[出力プロパティを作成](create-component.md#create-and-use-output-property)するための手順を[画面に追加](create-component.md#add-component-to-a-screen)することもできます。 

1. コンポーネントの作成とテストが完了したら、 **[ファイル]** メニューの **[保存]** を選択して、コンポーネントライブラリを保存します。 

    また、**バージョンメモ**を保存するオプションもあります。 バージョンノートは、コンポーネントライブラリのバージョンを取得するのに役立ちます。 アプリで使用されるコンポーネントをこのコンポーネントライブラリからアップグレードする場合。

    ![コンポーネントライブラリを保存するときのバージョンメモ](./media/component-library/save-component-libray-version-note.png)

    > [!TIP]
    > バージョンノートは、コンポーネントライブラリのバージョンを確認する場合や、コンポーネントライブラリを使用してアプリの製造元が変更を確認し、必要に応じてこれらのコンポーネントを消費するアプリを更新する場合に役立ちます。 詳細について[は、「コンポーネントライブラリを更新する](component-library.md?#update-a-component-library)」を参照してください。   

1. 保存されたコンポーネントライブラリを発行できます。 コンポーネントライブラリを使用するアプリでは、公開されたコンポーネントライブラリの更新プログラムのみを使用できます。 **[発行]** を選択して、コンポーネントライブラリのバージョンを発行します。

    ![コンポーネントライブラリバージョンの発行](./media/component-library/publish-component-library.png)

## <a name="import-from-a-component-library"></a>コンポーネントライブラリからのインポート

コンポーネントライブラリを作成して発行すると、そのライブラリをインポートすることで、このコンポーネントライブラリのコンポーネントをアプリで使用できるようになります。 [コンポーネントライブラリを共有](component-library.md#component-library-permissions)することもできます。

コンポーネントライブラリからインポートするには、既存のアプリを編集するか、新しいアプリを作成します。 キャンバスアプリ studio でアプリが開いたら、左側のナビゲーションで **[挿入]** または [ **+** ] を選択します。 次に、[**その他のコンポーネントを取得**する] を選択して、現在の環境で使用可能なコンポーネントライブラリを一覧表示します。

![その他のコンポーネントを取得する](./media/component-library/get-more-components.png)

現在の環境で使用可能なコンポーネントライブラリの一覧が画面の右側に表示されます。 コンポーネントライブラリから個々のコンポーネントを選択します。 または、 **[すべて選択]** を使用して、ライブラリからすべてのコンポーネントを一度にインポートします。

![コンポーネントのインポート](./media/component-library/components.png)

> [!NOTE]
> [インポート] セクションに [コンポーネントライブラリ] が表示されていない場合は、コンポーネントライブラリがメーカーと共有されていることを確認します。 詳細については、「[コンポーネントライブラリのアクセス許可](component-library.md#component-library-permissions)」を参照してください。 

複数のコンポーネントを選択してインポートすることができます。また、コンポーネントライブラリも異なっていてもかまいません。 

アプリ内で使用できるコンポーネントは、**挿入**ペインのコンポーネントの一覧の [**カスタム**カテゴリ] の下に表示されます。 インポートされたコンポーネントライブラリから使用できるコンポーネントは、[**ライブラリコンポーネント**カテゴリ] の下に表示されます。

![アプリにコンポーネントを挿入する](./media/component-library/insert-components.png)

## <a name="update-a-component-library"></a>コンポーネントライブラリの更新

既存のコンポーネントライブラリを変更し、その他のバージョンメモを使用して変更を保存することができます。 ただし、コンポーネントライブラリを使用する既存のアプリケーションで使用するために、更新されたコンポーネントライブラリのバージョンを発行する必要があります。 この[例のコンポーネントライブラリ](component-library.md#create-an-example-component-library)の手順では、保存後にコンポーネントライブラリを公開する方法について説明します。

他のアプリのメーカーには、更新されたコンポーネントが利用可能であることが通知されます。 この通知は、メーカーが canvas app studio でアプリを編集するときに表示されます。 コンポーネントの更新を選択できます。

![利用可能な更新](./media/component-library/update-available.png)

**[レビュー]** を選択すると、コンポーネントを更新するためのオプションが表示されます。

![コンポーネントの更新](./media/component-library/update-components.png)

ここにコンポーネントライブラリバージョンの発行時に追加したバージョンノートが表示されます。 

**[更新]** を選択して、コンポーネントを更新します。

## <a name="component-library-permissions"></a>コンポーネントライブラリのアクセス許可

コンポーネントライブラリの共有は、キャンバスアプリを共有する場合と同様に機能します。 コンポーネントライブラリを共有すると、他のユーザーがコンポーネントライブラリを再利用できるようになります。 共有されると、他のユーザーは、この共有コンポーネントライブラリからコンポーネントライブラリを編集し、コンポーネントをインポートして、アプリの作成と編集を行うことができます。 共同所有者として共有されている場合、ユーザーはコンポーネントライブラリを使用、編集、共有できますが、所有者を削除したり変更したりすることはできません。

## <a name="known-limitations"></a>既知の制限事項

- コンポーネントに適用可能な[既知の制限](create-component.md#known-limitations)は、コンポーネントライブラリにも適用されます。
- ローカルに保存されたコンポーネントライブラリファイルからコンポーネントライブラリを使用してコンポーネントをインポートすることはできません。 **ファイル** -> 使用してローカルに保存されたコンポーネントライブラリをインポートしようとすると -> **このコンピューター**に**保存**し、コンポーネントライブラリファイルをアプリとしてダウンロードすると、次のエラーメッセージが表示されます。 

    ![コンポーネントライブラリファイルのインポート](./media/component-library/import-component-library-file.png)

- 既存のコンポーネントライブラリを[ソリューション](add-app-solution.md)に追加することはできません。 ただし、[コンポーネントライブラリフローの追加] を使用すると、ソリューション用の新しいコンポーネントライブラリを作成できます。

- コンポーネントライブラリからコンポーネントをインポートする場合は、コンシューマーアプリ内でコンポーネントを編集することはできません。 [コンポーネントの**編集**] を選択すると、現在のアプリ内にコンポーネントのコピーを作成して、変更を加えるためのオプションが表示されます。 

    ![ライブラリコンポーネントの編集](./media/component-library/edit-library-component.png)

    **[コピーの作成]** を選択すると、コンポーネントがローカルアプリにコピーされます。 コンポーネントのローカルコピーは、**挿入**ペインの **[カスタム]** カテゴリの下に表示されます。 元のコンポーネントライブラリの新しいバージョンが後で公開された場合、このコンポーネントのローカルコピーは更新を受け取りません。
    
- コンポーネントがコンポーネントライブラリからアプリに追加され、アプリのテーマが更新されると、コンポーネントはローカルアプリコンポーネントになり、コンポーネントライブラリのマスターコンポーネントに関連付けられなくなります。

## <a name="next-steps"></a>次のステップ:

キャンバスアプリの[動作の数式](component-behavior.md)について説明します。

### <a name="see-also"></a>参照

「Canvas アプリ[コンポーネントの概要」と「](create-component.md)アプリ内のコンポーネントの操作」を参照してください。
