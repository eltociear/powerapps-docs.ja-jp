---
title: PowerApps を使ったコンポーネントを持つユーザー定義エンティティの作成 | Microsoft Docs
description: PowerApps アプリで使用するエンティティを作成および構成するための詳細な手順を示すトピック。
author: Mattp123
manager: kvivek
ms.service: powerapps
ms.component: cds
ms.topic: tutorial
ms.date: 01/23/2019
ms.author: matp
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="create-a-custom-entity-that-has-components-in-powerapps"></a>PowerApps でのコンポーネントを持つユーザー定義エンティティの作成

PowerApps では、アプリを調整して、組織の業務、用語、および固有のビジネス プロセスに適合させることができます。 PowerApps アプリ開発には、標準の "簡単に使える" エンティティを追加したり、ユーザー定義エンティティを作成することが含まれます。 エンティティは、レコードの形式で追跡する情報を定義します。通常は会社名、場所、製品、電子メール、電話などのプロパティが含まれます。 

このトピックでは、エンティティを作成し、フィールド、関係、ビュー、フォームなどの主要コンポーネントを追加またはカスタマイズします。 以下の方法を説明します。

- ユーザー定義エンティティの作成
- エンティティにユーザー定義フィールドを追加する
- エンティティ関係の追加
- ビューのカスタマイズ 
- フォームのカスタマイズ

トピックは、犬と猫をグルーミングするペット グルーミング企業である Contoso に従います。 Contoso には、さまざまなデバイスで従業員が使用できるクライアントおよびペット追跡用のアプリが必要です。

## <a name="prerequisites"></a>前提条件

[PowerApps](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) にサインインします。 まだ PowerApps アカウントを持っていない場合、[powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) から**無料で使用開始**リンクを選択します。

## <a name="create-a-custom-entity"></a>ユーザー定義エンティティの作成

1. 左側のナビゲーション ウィンドウで、**データ**を展開して**エンティティ**を選び、**新しいエンティティ**を選択します。
    > [!div class="mx-imgBorder"] 
    > ![エンティティの新規作成](media/create-custom-entity/create-new-entity.png)
2. 右側のウィンドウで、次の値を入力し、**次へ**を選択します。
  - **表示名**: *[Pet(ペット)]*
  - **説明**: *ペット サービスを追跡するユーザー定義エンティティ*
3. **エンティティの保存**を選択します。

## <a name="add-and-customize-fields"></a>フィールドを追加してカスタマイズ
 
1. エンティティの一覧で、前のセクションで作成された**ペット** エンティティを選択します。
2. **フィールド** タブで、**ペット** フィールドを選択します。
3. 右側のウィンドウで、**表示名**フィールドに対して次の変更を加えます。 
  - **表示名**を**ペット**から*ペット名*に変更する
  - **検索可能**を選びます。  
  
    > [!div class="mx-imgBorder"] 
    > ![プライマリ フィールドの変更](media/create-custom-entity/primary-field.png)
3. **完了**を選択します。
4. エンティティ デザイナー ツール バーの**フィールド** タブで、**フィールドの追加**を選択します。 **フィールドのプロパティ** ウィンドウで、次の値とオプションを入力または選択します。
  - **表示名**。 *[Species(種類)]*
  - **データの種類**。 *オプション セット*
  - **オプション セット**。 *新しいオプション セット*
5. オプション セットの作成

  a. **新しい項目の追加**を選択します。 
  
  b. **新しいオプション**を*犬*に置き換えます。 
   
  c. **新しい項目の追加**を選択します。 
    
  d.  **新しいオプション**を*猫*に置き換えます。 
    
  e. **保存**を選びます。 

  > [!div class="mx-imgBorder"] 
  > ![新しいオプション セット](media/create-custom-entity/optionset-add-items.png)

6. **検索可能**を選択し、**完了**を選択します。

7. エンティティ デザイナー ツール バーで、**フィールドの追加**を選択します。 **フィールドのプロパティ** ウィンドウで、次の値を入力または選択し、**完了**を選択します。
  - **表示名**。 *[Breed(ブリーディング)]*
  - **データの種類**。 *テキスト*
  - **検索可能**。 *はい*

8. エンティティ デザイナー ツール バーで、**フィールドの追加**を選択します。 

9. **フィールドのプロパティ** ウィンドウで、次の値を入力または選択し、**完了**を選択します。 
  - **表示名**。 *[Appointment date(予定の日付)]*
  - **データの種類**。 *日時*

10. **エンティティの保存**を選択します。

## <a name="add-a-relationship"></a>関係の追加

1. **リレーションシップ**タブを選択し、エンティティ デザイナー ツール バーで**リレーションシップの追加**を選択し、**多対一** を選択します。 
2. 右側のウィンドウの**関連**の一覧で、**取引先企業**を選択します。
3. **完了**を選択します。
4. **エンティティの保存**を選択します。

  多対一 のリレーションシップを追加すると、データ型**ルックアップ**の**取引先企業**フィールドが**フィールド** タブのフィールドの一覧に自動的に追加されることに注意してください。
  > [!div class="mx-imgBorder"]
  > ![取引先企業検索フィールド](media/create-custom-entity/account-lookup-field.png)

## <a name="customize-a-view"></a>ビューのカスタマイズ

1. **ビュー** タブを選択し、**アクティブなペット** ビューを選択し、** クラシックに切り替える** を選択します。 **アクティブなペット** ビューが表示されない場合、**フィルターの削除**を選択します。
2. ビュー デザイナーで**列の追加**を選択し、次の列を選択して **OK** を選択します。
  - 取引先企業
  - [Appointment date(予定の日付)]
  - [Breed(ブリーディング)]
  - [Species(種類)]
3. **作成日**列を選択して **削除**を選択し、**OK** を選択して列の削除を確認します。
4. 列を並べ替えるには、移動する列を選択し、ビューがこのようになるまで <- および -> 矢印ボタンを使います。
    > [!div class="mx-imgBorder"] 
    > ![アクティブなペット ビュー](media/create-custom-entity/active-pets-view.png)
5. ビュー デザイナー ツール バーで、**保存して閉じる** を選択します。  

## <a name="model-driven-apps-only-customize-the-main-form"></a>モデル駆動型アプリ: メイン フォームをカスタマイズする

キャンバスの アプリでペット エンティティを使用する場合は、この手順は省略します。 

1. 左側のナビゲーション ウィンドウで、**データ**を展開して**エンティティ**を選び、**[Pet(ペット)]**を選択します。	
2. **フォーム** タブを選択し、**メイン** フォームの隣の**情報**を選択して、フォーム エディターを開き、** クラッシックに切り替えます ** を選択します。
    > [!div class="mx-imgBorder"] 
    > ![メイン フォームの編集](media/create-custom-entity/main-form-edit.png)
3. フォーム エディターで、フィールド エクスプローラー ウィンドウにある**[Species(種類)]**、**[Breed(ブリーティング)]**、**[Appointment date(予定の日付)]**、**[Account(取引先企業)]**フィールドを、フォームが次のようになるまでフォーム キャンバスの全般セクションにドラッグ アンド ドロップします。
    > [!div class="mx-imgBorder"] 
    > ![メイン フォームにフィールドを選択](media/create-custom-entity/main-form-edit2.png) 
4. **保存**を選びます。
5. **発行**を選択します。
6. **保存して閉じる**を選択してフォーム デザイナーを閉じます。

## <a name="add-the-custom-entity-to-an-app"></a>アプリにユーザー定義エンティティを追加する

これで、キャンバスまたはモデル駆動型アプリをビルドするために、エンティティを使用する準備が整いました。 

## <a name="next-steps"></a>次のステップ

このトピックでは、役に立つアプリの作成に使用できるエンティティの作成方法について学びました。 
- モデル駆動型のアプリの作成方法については、「[最初のモデル駆動型アプリの作成](../model-driven-apps/build-first-model-driven-app.md)」を参照してください。
- キャンバス アプリを作成する方法について詳しくは、「[アプリを最初から作成する]](../canvas-apps/get-started-create-from-blank.md)」を参照してください。
