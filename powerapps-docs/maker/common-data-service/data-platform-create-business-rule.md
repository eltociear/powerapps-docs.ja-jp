---
title: Common Data Service でビジネス ルールを作成する | Microsoft Docs
description: Common Data Service でビジネス ルールを作成する方法についての手順。
author: lancedMicrosoft
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: lanced
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 45d0d4ce80d1552ace70ae5b25a67e570141d261
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2019
ms.locfileid: "2754744"
---
# <a name="create-a-business-rule-for-an-entity"></a>エンティティの業務ルールの作成

業務ルールおよびビジネス レコメンデーションを作成し、 コードの記述またはプラグインの作成を行わずにロジックおよび検証を適用できます。業務ルールは、変化が急速で、よく使用される業務ルールを実装および保守するための、単純なインターフェイスを提供します。

> [!IMPORTANT]
> エンティティに対して定義された業務ルールは、エンティティがアプリで使用される場合、*キャンバス アプリ*および*モデル駆動型アプリ*の両方に適用されます。 現時点では、キャンバス アプリで使用できない業務ルールもあります。 詳細については、[キャンバス アプリとモデル駆動型アプリの違い](#differences-between-canvas-and-model-driven-apps)を参照してください。<br/><br/>
> モデル駆動型アプリのフォームに適用される業務ルールを定義するには、[モデル駆動型アプリ フォームでロジックに適用するための業務ルールを作成する](../model-driven-apps/create-business-rules-recommendations-apply-logic-form.md)を参照してください。

条件とアクションを組み合わせることで、業務ルールを使用して以下の操作を実行できます:  
  
* フィールド値を設定する  
* フィールド値のクリア  
* フィールドの入力要求レベルを設定する  
* フィールドを表示または非表示にする  
* フィールドを有効化または無効化する  
* データを検証し、エラー メッセージを表示する  
* ビジネス インテリジェンスに基づくビジネス レコメンデーションを作成する  
  
## <a name="differences-between-canvas-and-model-driven-apps"></a>キャンバス アプリおよびモデル駆動型アプリ間の違い

モデル駆動型アプリは業務ルールですべての操作が使用できますが、現時点でキャンバス アプリは業務ルールですべての操作を使用できるわけではありません。 以下の操作はキャンバス アプリで使用でき**ません**。

* フィールドを表示または非表示にする  
* フィールドを有効化または無効化する  
* ビジネス インテリジェンスに基づくビジネス レコメンデーションを作成する  

## <a name="prerequisites"></a>前提条件
このトピックに従って、エンティティを作成および編集できるよう [環境](../canvas-apps/working-with-environments.md) を切替える必要があります。

## <a name="create-a-business-rule"></a>業務ルールの作成
  
1. [PowerApps](https://make.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) にサインインし、左端にある **データ** の下矢印をクリックまたはタップします。

2. 表示される一覧で、**エンティティ**をクリックまたはタップします。
  
3. 業務ルールを作成するエンティティを開き (例えば、**取引先企業**エンティティを開く)、**業務ルール**タブをクリックします。  

4. **新規** をクリックします。  
  
    業務ルールの設計ウィンドウはユーザーに対して既に作成された 1 つの条件で開きます。 あらゆる規則は条件から始まります。 業務ルールはその条件に基づいて 1 つ以上のアクションをとります。  

    > [!TIP]
    > 既存の業務ルールを修正する場合は、その修正を行う前に、非アクティブ化する必要があります。  
  
5. 必要に応じて、ウィンドウの左上コーナーの説明ボックスに説明を追加します。
  
6. 次に従ってスコープを設定します:  
  
    |||  
    |-|-|  
    |**このアイテムを選択する場合…**|**スコープは次に設定されます...**|  
    |**エンティティ**|モデル駆動のフォームとサーバー|  
    |**すべてのフォーム**|モデル駆動のフォーム|  
    |特定のフォーム (例えば、**取引先企業**フォームです)|このモデル駆動のフォームのみ|  

    > [!TIP]
    > キャンバス アプリを構築すると、スコープとしてエンティティを使用する必要があります。
  
7. **条件を追加します。** 業務ルールにそのほかの条件を追加するには:  
  
    1. **コンポーネント**タブから**条件**コンポーネントをデザイナーの [+] 記号にドラッグします。  
  
        ![ビジネス ルールに条件を追加する](./media/data-platform-cds-create-business-rule/add-condition-business-rule.png "ビジネス ルールに条件を追加する")  
  
    2. 条件のプロパティを設定するには、デザイナー ウィンドウの**条件**をクリックし、画面の右側にある**プロパティ**タブでプロパティを設定します。 プロパティを設定すると、 Common Data Service が **プロパティ** タブの下部に式を作成します。  
  
    3. 付加的な節 (AND または OR) を条件に追加するには、**プロパティ**タブの**新規**をクリックし、新しいルールを作成してからそのルールのプロパティを設定します。 **ルール ロジック**フィールドで、AND または OR として新しいルールを追加するかを指定できます。  
  
        ![条件に新しいルールを追加する](./media/data-platform-cds-create-business-rule/add-new-rule-condition.png "条件に新しいルールを追加する")  
  
    4. 条件のプロパティの設定が終了したら、**適用**をクリックします。  
  
8. **アクションを追加します。** アクションを追加するには:  
  
    1. **コンポーネント**タブのアクション コンポーネントの 1 つを**条件**コンポーネントの隣にあるプラス記号へドラッグします。 条件が満たされる場合に業務ルールによるアクションを実行する場合は、アクションをチェック マークの隣にあるプラス記号にドラッグするか、または条件が満たされない場合に業務ルールによるアクションを実行する場合は、アクションを X の隣にあるプラス記号にドラッグします。
  
        ![アクションを業務ルールへドラッグする](./media/data-platform-cds-create-business-rule/drag-an-action-business-rule.png "アクションを業務ルールへドラッグする")  
  
    2. アクションのプロパティを設定するには、デザイナー ウィンドウの**アクション**コンポーネントをクリックし、**プロパティ**タブでプロパティを設定します。  
  
    3. プロパティの設定が終了したら、**適用**をクリックします。  
  
9. **ビジネス レコメンデーションを追加します。(モデル駆動型のみ)** ビジネス レコメンデーションを追加するには:  
  
    1. **コンポーネント**タブの**レコメンデーション**コンポーネントを**条件**コンポーネントの隣にあるプラス記号へドラッグします。 条件が満たされる場合に業務ルールによるアクションを実行する場合は、**レコメンデーション**コンポーネントをチェック マークの隣にあるプラス記号にドラッグするか、または条件が満たされない場合に業務ルールによるアクションを実行する場合は、X の隣にあるプラス記号にドラッグします。  
  
    2. レコメンデーションのプロパティを設定するには、デザイナー ウィンドウの**レコメンデーション**コンポーネントをクリックし、**プロパティ**タブでプロパティを設定します。  
  
    3. さらに多数のアクションをレコメンデーションに追加するには、**コンポーネント**タブからそれらをドラッグし、**プロパティ**タブで各アクションに対するプロパティを設定します。  
  
        > [!NOTE]
        >  レコメンデーションを作成すると、 既定で Common Data Service が単一のアクションを追加します。 レコメンデーションにおけるすべてのアクションを表示するには、**レコメンデーション**コンポーネントの**詳細**をクリックします。  
  
    4. プロパティの設定が終了したら、**適用**をクリックします。  
  
10. 業務ルールを検証するには、[操作] バーの**検証**をクリックします。  
  
11. 業務ルールを保存するには、[操作] バーの**保存**をクリックします。  
12. 業務ルールを有効にするには、ソリューション エクスプローラーのウィンドウで業務ルールを選択し、次に**有効化**をクリックします。 デザイナー ウィンドウでは業務ルールを有効化できません。  
  
    > [!TIP]
    >  デザイナー ウィンドウの業務ルールを操作する時に覚えておくと役に立つヒントが次に示されています:  
    >   
    > - 業務ルール ウィンドウにあるすべてのスナップショットを作成するには、[操作] バーの**スナップショット**をクリックします。 たとえば、チーム メンバーから業務ルールにおけるコメントを共有し取得する場合に便利です。  
    > - ミニマップを使用すると、プロセスの異なる部分に素早く移動できます。 これは画面の外での複雑なプロセスがあるときに便利です。  
    > - 条件、アクション、ビジネス レコメンデーションを業務ルールに追加すると、Common Data Service により、業務ルールのコードがデザイナー ウィンドウの下部に作成されます。 このコードは読み取り専用です。  
  
## <a name="localize-error-messages-used-in-business-rules"></a>業務ルールで使用されるエラー メッセージのローカライズ  
 組織で使用する複数の言語が存在する場合は、設定したエラー メッセージのローカライズが必要になると思われます。 メッセージを設定するたびに、ラベルがシステムによって生成されます。 組織内で翻訳をエクスポートする場合は、メッセージのローカライズバージョンを追加してからラベルを Common Data Service にインポートし直し、ベース言語以外の言語を使用しているユーザーが翻訳されたメッセージを表示できるようにします。  
  
