---
title: PowerApps でソリューションの更新を簡素化するために、セグメント化されたソリューションとパッチを使用します| MicrosoftDocs
description: ソリューションのセグメント化を使用してソリューションを更新する方法の学習
ms.custom: ''
ms.date: 06/18/2018
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: 5c05f683-e1bd-4885-be23-b6973128773f
caps.latest.revision: 15
ms.author: matp
manager: kvivek
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 8f2b890766c6643da0a5363f49ef9b5c233b0b0b
ms.sourcegitcommit: 8185f87dddf05ee256491feab9873e9143535e02
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/01/2019
ms.locfileid: "2703120"
---
# <a name="use-segmented-solutions-and-patches-to-export-selected-entity-assets"></a>セグメント化されたソリューションおよびパッチを使用して選択したエンティティ資産をエクスポート

ソリューションおよびソリューションの修正プログラムで配布する内容をより厳格にコントロールするには、ソリューションのセグメント化を使用します。 ソリューションのセグメント化では、すべての資産を含むエンティティ全体ではなく、選択したエンティティ資産 (エンティティ フィールド、フォーム、ビューなど) をソリューションと共にエクスポートできます。 セグメント化したソリューションおよび修正プログラムを作成するには、コードを書かないで、ソリューション ユーザー インターフェイスを使用することができます。  
  
 ソリューション内の内容のコントロールの強化に加えて、修正プログラムの記述の内容もコントロールできます。 上位のソリューションの修正プログラムを作成して、それをマイナー更新プログラムとして基本ソリューションにエクスポートできます。 ソリューションを複製するときは、システムは基本ソリューションに関連するすべての修正プログラムをロールバックして、新しいバージョンを作成します。  
  
 修正プログラムおよび複製されたソリューションを使用するとき、以下の点に注意してください。  
  
-   修正プログラムは、上位のソリューションへの逐次のマイナーな更新プログラムを表しています。 修正プログラムは、ターゲット システムへのインストール時に、コンポーネントおよび資産を上位のソリューション内で追加または更新できますが、上位ソリューションからコンポーネントまたは資産を削除することはできません。  
  
-   修正プログラムは 1 つの上位のソリューションにしか対応できませんが、上位のソリューションは 1 つ以上の修正プログラムに対応できます。  
  
-   修正プログラムはアンマネージド ソリューションに対して作成されます。 管理ソリューションに対して修正プログラムを作成することはできません。  
  
-   ターゲット システムに修正プログラムをエクスポートするときは、マネージド修正プログラムとしてエクスポートする必要があります。 運用環境では、アンマネージド修正プログラムを使用しないでください。  
  
-   修正プログラムをインストールするには、ターゲット システムに上位のソリューションが存在している必要があります。  
  
-   修正プログラムを削除または更新できます。  
  
-   上位のソリューションを削除すると、すべての子の修正プログラムも削除されます。 システムは、削除操作は元に戻すことができませんという警告メッセージを表示します。 削除は単一のトランザクションで実行されます。 修正プログラムの 1 つまたは親のソリューションを削除できなかった場合、トランザクション全体がロールバックされます。  
  
-   上位のソリューションの最初の修正プログラムを作成すると、そのソリューションはロックされ、このソリューションを変更することまたはエクスポートすることはできません。 ただし、その子の修正プログラムをすべて削除すると、上位のソリューションのロックが解除されます。  
  
-   基本ソリューションを複製するとき、すべての子の修正プログラムはその基本ソリューションにロールアップされて、その基本ソリューションが新しいバージョンになります。 複製されたソリューション内のコンポーネントおよび資産を追加、編集、または削除することができます。  
  
-   複製されたソリューションは、ターゲット システムにマネージド ソリューションとしてインストールされたときの基本ソリューションの置き換えを示します。 通常、複製されたソリューションを使用して、前のソリューションの重要な更新プログラムを配布します。  
  
## <a name="understanding-version-numbers-for-cloned-solutions-and-patches"></a>複製されたソリューションおよびと修正プログラムのバージョン番号について  
 ソリューションのバージョンの形式は major.minor.build.revision です。 修正プログラムのビルド番号またはリビジョン番号は、上位のソリューションよりも大きくする必要があります。 それよりも上位のメジャーまたはマイナー バージョンは使用できません。 たとえば、基本ソリューションのバージョンが 3.1.5.7 の場合、修正プログラムはバージョン 3.1.5.8 またはバージョン 3.1.7.0 になることはできますが、バージョン 3.2.0.0 になることはできません。 複製されたソリューションのバージョン番号は、基本ソリューションのバージョン番号以上になる必要があります。 たとえば、基本ソリューションのバージョンが 3.1.5.7 の場合、複製されたソリューションはバージョン 3.2.0.0 またはバージョン 3.1.5.7 になることができます。 UI で設定できるのは、複製ソリューションのメジャーおよびマイナー バージョンの値と、修正プログラムのビルドまたはリビジョンの値のみです。  
  
## <a name="create-a-segmented-solution-with-the-entity-assets-you-want"></a>セグメント化したソリューションを必要なエンティティ資産を使用して作成  
 セグメント化したソリューションを作成するには、アンマネージド ソリューションの作成と既存のリソースの追加から開始します。 複数のシステムやユーザー定義エンティティを追加できます。それらのエンティティごとに、ソリューションに含める資産を選択します。 ウィザード風のセットアップにより、エンティティ資産の追加のプロセスを段階的に進みます。  
  
1. **[設定](../model-driven-apps/advanced-navigation.md#settings)** > **ソリューション**に移動します。   
  
2.  **新規**を選択してソリューションを作成します。 必須フィールドに情報を入力します。 **保存して閉じる**を選択します。  
  
3.  作成したばかりのソリューションを開きます。 **既存の追加**ドロップダウン リストで、**エンティティ**を選択します。  
  
4.  **ソリューション コンポーネントの選択**ダイアログ ボックスで、ソリューションに追加する 1 つ以上のエンティティを選択します。 **OK** を選びます。  
  
5.  ウィザードが開きます。 ウィザードの指示に従って、選択した各エンティティの資産をソリューションに追加します。  
  
6.  変更を反映するには**公開**を選択します。  
  
 次の図に、エンティティ資産を`Account`エンティティ、`Case`エンティティ、および`Contact`エンティティから選択してセグメント化したソリューションを作成した例を示します。  
  
 **エンティティ**コンポーネントの選択から開始します。  

 > [!div class="mx-imgBorder"] 
 > ![既存のリソースを追加。](media/solution-segmentation-add-existing-resources-admin.png "既存のリソースを追加。")  
  
 次に、ソリューション コンポーネントを選択します。  
  
 ![ソリューションのコンポーネントを選択。](media/solution-segmentation-select-components-admin.png "ソリューションのコンポーネントを選択。")  
  
 ウィザードに従います。 手順 1 で、アルファベット順に開始して、次のように、最初のエンティティである`Account`エンティティの資産を選択します。  
  
 ![ウィザードを開始します。](media/solution-segmentation-wizard-starts-admin.png "ウィザードを開始します。")  
  
 **フィールド**タブを開き、**取引先企業番号**フィールドを選択します。  
  
 ![取引先企業のエンティティ資産を選択します。](media/solution-segmentation-select-account-assets-admin.png "取引先企業のエンティティ資産を選択します。")  
  
 手順 2 で、**サポート案件**エンティティについて、すべての資産を追加します。  
  
 ![サポート案件のエンティティ資産を選択します。](media/solution-segmentation-select-case-assets-admin.png "サポート案件のエンティティ資産を選択します。")  
  
 手順 3 で、**取引先担当者**エンティティの**記念日**フィールドを追加します。  
  
 ![取引先担当者のエンティティ資産を選択します。](media/solution-segmentation-select-contact-assets-admin.png "取引先担当者のエンティティ資産を選択します。")  
  
 その結果、作成したセグメント化されたソリューションには、`Account`、`Case`、および`Contact`の 3 つのエンティティが含まれます。 各エンティティには選択した資産のみが含まれます。  
  
 > [!div class="mx-imgBorder"] 
 > ![エンティティを含むソリューション。](media/solution-segmentation-solution-entities-admin.png "エンティティを含むソリューション。")  
  
## <a name="create-a-solution-patch"></a>ソリューション修正プログラムの作成  
 修正プログラムには、コンポーネントおよび資産の追加または編集などの、上位のソリューションへの変更が含まれています。 上位のコンポーネントを編集する場合でない限り、上位コンポーネントを含める必要はありません。  
  
 #### <a name="create-a-patch-for-an-unmanaged-solution"></a>アンマネージド ソリューションに対して修正プログラムを作成する  
  
1. **[設定](../model-driven-apps/advanced-navigation.md#settings)** > **ソリューション**に移動します。   
  
2.  一覧で、修正プログラムを作成する対象のアンマネージド ソリューションを選択します。 **修正プログラムの複製**を選択します。 開いたダイアログ ボックスに、基本ソリューションの名前と修正プログラムのバージョン番号が含まれています。 **保存**を選びます。  
  
3.  グリッドで、新しく作成された修正プログラムを見つけて開きます。 基本ソリューションの場合とまったく同様に、ウィザードに従って、必要な資産とコンポーネントを追加します。  
  
4.  変更を反映するには、**公開**を選択します。  
  
 次の図に、既存のソリューションの修正プログラムを作成する例を示します。 **修正プログラムの複製**を選択して開始します (圧縮されたビューでは、**修正プログラムの複製**アイコンは、次に示すように、2 つの小さい正方形として表示されます)。  
  
 > [!div class="mx-imgBorder"] 
 > ![[修正プログラムの複製] アイコン。](media/solution-segmentation-click-patch-icon-admin.png "[修正プログラムの複製] アイコン。")  
  
 **修正プログラムに対する複製**ダイアログ ボックスで、修正プログラムのバージョン番号は上位のソリューションのバージョン番号が基になっているが、ビルド番号は 1 つずつ増加することが分かります。 後続の各修正プログラムのビルドまたはリビジョン番号は、直前の修正プログラムよりも大きくなっています。  
  
 ![[修正プログラムに対する複製] ダイアログを使用。](media/solution-segmentation-clone-patch-dialog-admin.png "[修正プログラムに対する複製] ダイアログを使用。")  
  
 次のスクリーンショットは、基本ソリューション **SegmentedSolutionExample** のバージョン **1.0.1.0** と、修正プログラム **SegmentedSolutionExample_Patch** のバージョン **1.0.2.0** を示しています。  
  
 > [!div class="mx-imgBorder"] 
 > ![ソリューションおよび修正プログラムを含むグリッド。](media/solution-segmentation-solution-patch-grid-admin.png "ソリューションおよび修正プログラムを含むグリッド。")  
  
 修正プログラムでは、`Book` という名前の新しいユーザ定義エンティティを追加して、`Book` エンティティのすべての資産をその修正プログラムに含めました。  
  
 ![修正プログラム内にユーザー定義エンティティを追加。](media/solution-segmentation-add-book-patch-admin.png "修正プログラム内にユーザー定義エンティティを追加。")  
  
## <a name="clone-a-solution"></a>ソリューションの複製  
 アンマネージド ソリューションを複製すると、このソリューションに関連するすべての修正プログラムが元のソリューションの新しく作成したバージョンにロールアップされます。  
  
1. **[設定](../model-driven-apps/advanced-navigation.md#settings)** > **ソリューション**に移動します。   
  
2.  リストから、複製するアンマネージド ソリューションを選択します。 **ソリューションの複製**を選択します。 開いたダイアログ ボックスには、基本ソリューションの名前と新しいバージョン番号が含まれています。 **保存**を選びます。  
  
3.  変更を反映するには、**公開**を選択します。  
  
 例を続行すると、新しいバージョン番号を示す**ソリューションに対する複製**ダイアログ ボックスが表示されます。  
  
 ![[ソリューションに対する複製] ダイアログを使用。](media/solution-segmentation-clone-solution-dialog-admin.png "[ソリューションに対する複製] ダイアログを使用。")  
  
 複製が完了すると、ソリューションの新しいバージョンに 3 つの元のエンティティ (`Account`、`Case`、および`Contact`) と、修正プログラムに追加した`Book`という名前のユーザー定義エンティティが格納されています。 各エンティティには、この例で追加した資産のみが含まれます。  
  
 > [!div class="mx-imgBorder"] 
 > ![ロールアップ パッチを含む複製されたソリューション。](media/solution-segmentation-solution-rolled-up-patch-admin.png "ロールアップ パッチを含む複製されたソリューション。")  
  
## <a name="next-steps"></a>次のステップ  
 [ソリューションの概要](solutions-overview.md) [ソリューションの更新を簡略化する修正プログラムの作成]

