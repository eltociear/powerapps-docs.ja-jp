---
title: ソリューション パッチを作成する | MicrosoftDocs
description: ソリューション修正プログラムの作成方法について
ms.custom: ''
ms.date: 02/04/2020
ms.reviewer: ''
ms.service: powerapps
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
author: Mattp123
ms.assetid: ''
caps.latest.revision: 15
ms.author: matp
manager: kvivek
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: b2a498ab6b5efbca0e3970769dcc3e19c4ecd77d
ms.sourcegitcommit: efb05dbd29c4e4fb31ade1fae340260aeba2e02b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2020
ms.locfileid: "3100173"
---
# <a name="create-solution-patches"></a>ソリューション修正プログラムの作成 
修正プログラムには、コンポーネントおよび資産の追加または編集などの、親管理ソリューションへの変更のみが含まれています。 インポートされた修正プログラムは、親ソリューションの上にレイヤ―されています。 ソリューションを複製するときは、システムは基本ソリューションに関連するすべての修正プログラムをロールバックして、新しいバージョンを作成します。  
  
 修正プログラムおよび複製されたソリューションを使用するとき、以下の点に注意してください。  
  
-   修正プログラムは、上位のソリューションへの逐次のマイナーな更新プログラムを表しています。 修正プログラムは、ターゲット システムへのインストール時に、コンポーネントおよび資産を上位のソリューション内で追加または更新できますが、上位ソリューションからコンポーネントまたは資産を削除することはできません。  
  
-   修正プログラムは 1 つの上位のソリューションにしか対応できませんが、上位のソリューションは 1 つ以上の修正プログラムに対応できます。  
  
-   修正プログラムはアンマネージド ソリューションに対して作成されます。 管理ソリューションに対して修正プログラムを作成することはできません。  
  
-   ターゲット システムに修正プログラムをエクスポートするときは、マネージド修正プログラムとしてエクスポートする必要があります。 運用環境では、アンマネージド修正プログラムを使用しないでください。  
  
-   修正プログラムをインストールするには、ターゲット システムに上位のソリューションが存在している必要があります。  
  
-   修正プログラムを削除または更新できます。  
  
-   上位のソリューションを削除すると、すべての子の修正プログラムも削除されます。 システムは、削除操作は元に戻すことができませんという警告メッセージを表示します。 削除は単一のトランザクションで実行されます。 修正プログラムの 1 つまたは親のソリューションを削除できなかった場合、トランザクション全体がロールバックされます。  
  
-   上位のソリューションの最初の修正プログラムを作成すると、そのソリューションはロックされ、このソリューションを変更することまたはエクスポートすることはできません。 ただし、その子の修正プログラムをすべて削除すると、上位のソリューションのロックが解除されます。  
  
-   基本ソリューションを複製するとき、すべての子の修正プログラムはその基本ソリューションにロールアップされて、その基本ソリューションが新しいバージョンになります。 複製されたソリューション内のコンポーネントおよび資産を追加、編集、または削除することができます。  
  
-   複製されたソリューションは、ターゲット システムにマネージド ソリューションとしてインストールされたときの基本ソリューションの置き換えを示します。 通常、複製されたソリューションを使用して、前のソリューションの重要な更新プログラムを配布します。  
  
## <a name="understanding-version-numbers-for-cloned-solutions-and-patches"></a>複製されたソリューションおよびと修正プログラムのバージョン番号について  
 ソリューションのバージョンの形式は major.minor.build.revision です。 修正プログラムのビルド番号またはリビジョン番号は、上位のソリューションよりも大きくする必要があります。 それよりも上位のメジャーまたはマイナー バージョンは使用できません。 たとえば、基本ソリューションのバージョンが 3.1.5.7 の場合、修正プログラムはバージョン 3.1.5.8 またはバージョン 3.1.7.0 になることはできますが、バージョン 3.2.0.0 になることはできません。 複製されたソリューションのバージョン番号は、基本ソリューションのバージョン番号以上になる必要があります。 たとえば、基本ソリューションのバージョンが 3.1.5.7 の場合、複製されたソリューションはバージョン 3.2.0.0 またはバージョン 3.1.5.7 になることができます。 UI で設定できるのは、複製ソリューションのメジャーおよびマイナー バージョンの値と、修正プログラムのビルドまたはリビジョンの値のみです。  
  

## <a name="create-a-solution-patch"></a>ソリューション修正プログラムの作成  
 修正プログラムには、コンポーネントおよび資産の追加または編集などの、上位のソリューションへの変更が含まれています。 上位のコンポーネントを編集する場合でない限り、上位コンポーネントを含める必要はありません。  
  
## <a name="create-a-patch-for-an-unmanaged-solution"></a>アンマネージド ソリューションに対して修正プログラムを作成する  
  
1. Power Apps ポータルに移動し、**ソリューション** を選択します。   
  
2. ソリューションの一覧で、修正プログラムを作成する対象のアンマネージド ソリューションを選択します。 コマンド バーで、**閉じる**を選択し、次に**修正プログラムの複製**を選択します。 右側のウィンドウに、基本ソリューションの名前と修正プログラムのバージョン番号が含まれています。 **保存**を選択します。  
   > [!div class="mx-imgBorder"] 
   > <img src="media/clone-a-patch.png" alt="Clone a patch" height="735" width="408">
 
3. ソリューションの一覧で、新しく作成された修正プログラムを見つけて開きます。 _修正プログラム_*16 進数*による、ソリューションの一意の名前が追加されていることに注意してください。 基本ソリューションの場合とまったく同様に、必要な資産とコンポーネントを追加します。  
  
### <a name="create-a-patch-using-solution-explorer"></a>ソリューション エクスプローラーを使用して修正プログラムを作成する
 次の図に、既存のソリューションの修正プログラムを作成する例を示します。 **修正プログラムの複製**を選択して開始します (圧縮されたビューでは、**修正プログラムの複製**アイコンは、次に示すように、2 つの小さい正方形として表示されます)。  
  
 > [!div class="mx-imgBorder"] 
 > ![[修正プログラムの複製] アイコン。](media/solution-segmentation-click-patch-icon-admin.png "[修正プログラムの複製] アイコン。")  
  
 **修正プログラムに対する複製**ダイアログ ボックスで、修正プログラムのバージョン番号は上位のソリューションのバージョン番号が基になっているが、ビルド番号は 1 つずつ増加することが分かります。 後続の各修正プログラムのビルドまたはリビジョン番号は、直前の修正プログラムよりも大きくなっています。  
  
 ![[修正プログラムに対する複製] ダイアログを使用。](media/solution-segmentation-clone-patch-dialog-admin.png "[修正プログラムに対する複製] ダイアログを使用。")  
  
 次のスクリーンショットは、基本ソリューション **SegmentedSolutionExample** のバージョン **1.0.1.0** と、修正プログラム **SegmentedSolutionExample_Patch** のバージョン **1.0.2.0** を示しています。  
  
 > [!div class="mx-imgBorder"] 
 > ![ソリューションおよび修正プログラムを含むグリッド。](media/solution-segmentation-solution-patch-grid-admin.png "ソリューションおよび修正プログラムを含むグリッド。")  
  
 修正プログラムでは、`Book` という名前の新しいユーザ定義エンティティを追加して、`Book` エンティティのすべての資産をその修正プログラムに含めました。  
  
 ![修正プログラム内にユーザー定義エンティティを追加。](media/solution-segmentation-add-book-patch-admin.png "修正プログラム内にユーザー定義エンティティを追加。")  
  
## <a name="clone-a-solution"></a>ソリューションの複製  
 アンマネージド ソリューションを複製すると、元のソリューションとこのソリューションに関連するすべての修正プログラムが元のソリューションの新しく作成したバージョンにロールアップされます。 複製が完了すると、ソリューションの新しいバージョンに元のエンティティに加えて修正プログラムに追加したというすべてのコンポーネントまたはエンティティが格納されています。 

![ソリューションの複製](media/cloned-solution.png)

> [!IMPORTANT]
> ソリューションを複製すると、元のソリューションと関連するパッチが削除されます。 
  
1. Power Apps ポータルに移動し、**ソリューション** を選択します。   
  
2.  ソリューションの一覧で、複製を作成する対象のアンマネージド ソリューションを選択します。 コマンド バーで、**閉じる**を選択し、次に**ソリューションの複製**を選択します。 右側のウィンドウに、基本ソリューションの名前と新しいバージョン番号が表示さています。 **保存**を選択します。  
  
### <a name="see-also"></a>関連項目
[ソリューションの概要](solutions-overview.md)