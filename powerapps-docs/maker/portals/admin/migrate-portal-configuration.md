---
title: ポータルの構成を移行する |MicrosoftDocs
description: ポータルの構成を移行する方法について説明します。
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/07/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 0aa057594b500c7019a4d645c70cafcfff183608
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2019
ms.locfileid: "73543048"
---
# <a name="migrate-portal-configuration"></a>ポータルの構成を移行する

ポータル開発には、ポータルエンドユーザーに必要なエクスペリエンスを実現するための構成とカスタマイズがいくつか含まれています。

ポータルインスタンスの開発または構成が完了したら、最新のポータル構成を開発からテスト環境または運用環境に移行することができます。 移行には、ソース Common Data Service 環境から既存の構成をエクスポートしてから、ターゲット Common Data Service 環境にインポートする必要があります。

構成データをエクスポートするには、構成移行ツールとポータル固有の構成スキーマファイルを使用する必要があります。 このツールの詳細については、「[構成データの管理](https://docs.microsoft.com/dynamics365/customer-engagement/admin/manage-configuration-data)」を参照してください。

> [!NOTE]
> - 最新バージョンの構成移行ツールを使用することをお勧めします。 構成移行ツールは、NuGet からダウンロードできます。 ツールをダウンロードするための詳細については、「 [NuGet からツールをダウンロード](https://docs.microsoft.com/dynamics365/customer-engagement/developer/download-tools-nuget)する」を参照してください。
> - 構成の移行のためにスキーマファイルでサポートされているポータルの最小ソリューションバージョンは8.4.0.275 です。 ただし、最新のソリューションバージョンを使用することをお勧めします。

スキーマファイルは、次のポータルの種類で使用できます。
- [コミュニティポータル](https://go.microsoft.com/fwlink/p/?linkid=2019704)
- [カスタマーセルフサービスポータル](https://go.microsoft.com/fwlink/p/?linkid=2019705)
- [パートナーポータル](https://go.microsoft.com/fwlink/p/?linkid=2019803)
- [従業員のセルフサービスポータル](https://go.microsoft.com/fwlink/p/?linkid=2019802)
- [カスタムポータル](https://go.microsoft.com/fwlink/p/?linkid=2019804)

既定のスキーマファイルには、ポータルのエンティティ、リレーションシップ、および各エンティティの一意の定義に関する情報が含まれています。 詳細情報:[ポータルの構成データをエクスポート](#export-portal-configuration-data)する

構成データをエクスポートした後、ターゲット環境にインポートする必要があります。 詳細情報:[ポータルの構成データをインポート](#import-portal-configuration-data)する

> [!NOTE]
> スキーマファイルは、スキーマを最初から作成するために必要な作業を減らすために用意されています。 スキーマは、ツールによって提供される標準的な方法を使用して、実装に合わせてカスタマイズできます。 スキーマファイルは、構成移行ツールで読み込み、エンティティや属性などの追加、削除、および変更を行うように変更できます。

## <a name="export-portal-configuration-data"></a>ポータルの構成データをエクスポートする

ポータル固有の構成スキーマファイルを使用して、ソースシステムからポータルの構成データをエクスポートできます。

1.  構成移行ツールをダウンロードし、目的のフォルダーに抽出します。

2.  ポータルの種類に対して上記のリンクを使用して、ポータルの構成スキーマファイルをダウンロードします。

3.  `<your_folder>\Tools\ConfigurationMigration` フォルダー内の**DataMigrationUtility**ファイルをダブルクリックして、構成移行ツールを実行し、メイン画面で **[データのエクスポート]** を選択し、 **[続行]** を選択します。
    
    > [!div class=mx-imgBorder]
    > ![構成データのエクスポート](../media/export-config-data.png "構成データのエクスポート")

4.  **ログイン**画面で、データをエクスポートする場所から Common Data Service 環境に接続するための認証の詳細を指定します。 Common Data Service 環境にデータをエクスポートする組織が複数ある場合は、 **[使用可能な組織の一覧を表示]** する チェックボックスをオンにして、 **[ログイン]** を選択します。

    > [!div class=mx-imgBorder]
    > ![データをエクスポートする場所から Common Data Service 環境に接続するための認証の詳細を指定します](../media/export-config-login.png "データをエクスポートする場所から Common Data Service 環境に接続するための認証の詳細を指定します")

5.  複数の組織があり、前の手順で [**使用できる組織の一覧を表示**する] チェックボックスをオンにした場合、次の画面では、接続先の組織を選択できます。 接続する Common Data Service 環境を選択します。 

    > [!NOTE]
    > 複数の組織が存在しない場合、この画面は表示されません。

6.  **[スキーマファイル]** で、データのエクスポートに使用するポータル固有の構成スキーマファイルを参照して選択します。

7.  **[データファイルに保存]** で、エクスポートするデータファイルの名前と場所を指定します。

    > [!div class=mx-imgBorder]
    > ![スキーマとターゲットファイルを指定する](../media/export-config-file-name.png "スキーマとターゲットファイルを指定する")

8.  **[データのエクスポート]** を選択します。 エクスポートが完了すると、エクスポートの進行状況と、エクスポートされたファイルの場所が画面の下部に表示されます。

    > [!div class=mx-imgBorder]
    > ![構成データのエクスポートの進行状況](../media/export-config-status.png "構成データのエクスポートの進行状況")

    > [!IMPORTANT]
    > 構成移行ツールでは、エンティティ内のレコードのフィルター処理はサポートされていません。 既定では、選択したエンティティのすべてのレコードがエクスポートされます。 そのため、複数の web サイトレコードを作成した場合は、すべての web サイトレコードがエクスポートされます。

9.  **[終了]** を選択してツールを終了します。

## <a name="import-portal-configuration-data"></a>ポータルの構成データをインポートする

1.  構成移行ツールを実行し、メイン画面で **[データのインポート]** を選択し、 **[続行]** を選択します。

    > [!div class=mx-imgBorder]
    > ![構成データのインポート](../media/import-config-data.png "構成データのインポート")

2.  **ログイン**画面で、データをエクスポートする場所から Common Data Service 環境に接続するための認証の詳細を指定します。 Common Data Service 環境にデータをエクスポートする組織が複数ある場合は、 **[使用可能な組織の一覧を表示]** する チェックボックスをオンにして、 **[ログイン]** を選択します。

3.  複数の組織があり、前の手順で [**使用できる組織の一覧を表示**する] チェックボックスをオンにした場合、次の画面では、接続先の組織を選択できます。 接続する Common Data Service 環境を選択します。 

    > [!NOTE]
    > - 複数の組織が存在しない場合、この画面は表示されません。
    > - 構成をインポートする組織に対して、ポータルソリューションが既にインストールされていることを確認します。

4.  次の画面では、インポートするデータファイル (.zip) を入力するように求められます。 データファイルを参照して選択し、[データの**インポート**] を選択します。 

    > [!div class=mx-imgBorder]
    > ![構成データのインポートの進行状況](../media/import-config-status.png "構成データのインポートの進行状況")

5.  次の画面には、レコードのインポートの状態が表示されます。 データのインポートは、依存データをキューに入れて最初に基礎データをインポートし、次のパスに依存データをインポートしてデータの依存関係やリンケージを処理するために、複数のパスで実行されます。 これにより、一貫性のあるデータのインポートが確実に行われます。 

6.  **[終了]** を選択してツールを終了します。 
