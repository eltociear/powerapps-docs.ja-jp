---
title: ポータルで管理されたフォームに物理的場所を追加する | MicrosoftDocs
description: 物理的場所を管理されたフォームに追加する手順。
author: tapanm-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/04/2019
ms.author: tapanm
ms.reviewer: ''
ms.openlocfilehash: 44619bfdb6d09221a6a23164a9627b4e06ebb0d7
ms.sourcegitcommit: a0d069f63d2ce9496d578f81e65cd32bec2faa4d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/23/2020
ms.locfileid: "2979456"
---
# <a name="add-geolocation"></a>物理的場所を追加する

*地理位置情報* は、オブジェクトの現実世界の物理的位置 ID です。 地理位置情報は、位置合わせのシステムの使用と密接に関係するが、一連の位置調整よりも、意味のある場所 (例、住所) を決定することに重点を置いています。 地理位置情報の通知は、特定の場所の緯度と経度の調整を意味することもあります。

管理フォームは、マップのピンとして既存の場所を表示するかユーザーが場所を特定できるようにするかのマップ コントロールを、表示できるように設定することができます。

![フォームの場所データ。](../media/location-data-form.png "フォームの場所データ")

フォームまたは住所ライン フィールドが編集可能でフィールドが空白な場合は、ページが読み込まれると、ユーザーが自分の位置情報を共有したいかどうかを尋ねるメッセージが表示されます。 位置の共有を選択すると、マップは現在検出された場所で更新されます。 ユーザーはピンをドラッグすることで、ピンの位置を調整することができます。 ユーザーがそれらの位置を共有しないことを選択すると、提供されたフィールドに手動で場所を指定することができ、マッピング サービスがクエリされ、場所を探し、緯度と経緯を更新し、それに応じて地図上のピンを再配置します。

## <a name="add-geolocation"></a>物理的場所を追加する
位置機能を管理対象フォームに追加するには、次のタスクを完了しなければなりません。

### <a name="form-customization"></a>[フォームのカスタマイズ]
フォーム デザイナーを使いながら、エンティティ フォームを編集し、次の変更を行います。

1. 新規セクションを作成し、例えば**マップ**のような適切なラベルを作ります。 このセクションにはマップが含まれます。
2. セクション名を、**section\_map** または _section\_map_ で終わる名前を設定します。例えば、**contoso\_section\_map** です。 この名前は、フォーム エンジンがこの名前のセクションを検索して、いつマップを表示するか決定するため重要です。 
3. 書式設定された住所を格納する新規または既存のフィールドを追加し、前の手順で作成された**マップ**セクションに追加します。
4. 新規セクションを作成し、例えば**位置**のような適切なラベルを作ります。 このセクションに選択された位置の住所フィールドが含まれます。
5. 前の手順で作成された**位置**セクションに、必要な住所フィールドを追加します。 
    - 住所
    - 市区町村
    - 郡
    - 都道府県
    - 国/地域
    - 郵便番号
    - 緯度
    - 経度

生成されたフォームは次のようになります。 これらのフィールドに異なる表示名を選択できます。 これらのセクションは、任意の方法でレイアウトを選ぶこともできます。

![カスタム位置情報フォーム。](../media/custom-geolocation-form.png "カスタム位置情報フォーム")

### <a name="site-settings"></a>サイトの設定
管理されたフォームのマップ機能を持つ地理位置情報には、マッピング サービス REST エンドポイント でリクエストを完了するための設定が必要です。 次のサイト設定は、位置サービスの設定に使用されます。

|Name|Value|
|---|---|
|Bingmaps/credentials|Bing マップ API への要求を認証するための一意のキーです。 [www.bingmapsportal.com](https://www.bingmapsportal.com) にアクセスして Bing マップ アカウントを作成し、キーを入手します。 必須。|
|Bingmaps/restURL|Bing マップ REST API への URLです。 省略可。 値を指定しない場合、既定の https://dev.virtualearth.net/REST/v1/Locations が使用されます。|
| |

### <a name="field-configurations"></a>フィールドの構成
マップ コントロールには、さまざまな場所フィールドの IDs が何であるかを示す追加の設定が必要で、それにより値を割り当てたり、値を取得したりすることが可能です。 その構成は、管理されたフォームの種類によって異なります。

- エンティティ フォームに関しては、[エンティティ フォームの地理位置情報コンフィギュレーション](entity-forms.md#geolocation-configuration-for-entity-forms) を確認してください。

- Web フォームに関しては、[Web フォームの地理位置上コンフィギュレーション](web-form-properties.md#geolocation-configuration-for-web-form) を確認してください。
