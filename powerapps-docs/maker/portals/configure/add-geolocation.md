---
title: ポータルで管理されたフォームに位置情報を追加する |MicrosoftDocs
description: 管理されたフォームに位置情報を追加する方法について説明します。
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/04/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: a3c583658a5593d8e6c5f6c139a5c967e9581626
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/04/2019
ms.locfileid: "73553557"
---
# <a name="add-geolocation"></a>位置情報の追加

*位置*情報は、オブジェクトの実際の地理的な場所を識別するものです。 位置情報は、ポジショニングシステムの使用に密接に関係していますが、地理的な座標のセットだけでなく、意味のある場所 (番地など) を決定することに重点が置かれています。 位置情報は、特定の場所の緯度と経度の座標を意味する場合もあります。

マップコントロールを表示するように構成すると、マップ上のピンとして既存の場所を表示したり、ユーザーが場所を指定できるようにしたりすることができます。

![フォーム内の位置データ。](../media/location-data-form.png "フォーム内の位置データ")

フォームまたはアドレス行フィールドが編集可能で、このフィールドが空白の場合、ページが読み込まれると、ユーザーが場所を共有するかどうかを確認するメッセージが表示されます。 それらのユーザーが場所を共有することを選択した場合、マップは現在検出されている場所で更新されます。 ユーザーは、pin をドラッグすることで、その場所を絞り込むことができます。 ユーザーが場所を共有しないことを選択した場合は、指定されたフィールド内の場所を手動で指定することができ、マッピングサービスは、場所を検索し、緯度と経度を更新し、それに応じてマップの位置を変更します。

## <a name="add-geolocation"></a>位置情報の追加
管理対象フォームに位置情報機能を追加するには、次のタスクを完了する必要があります。

### <a name="form-customization"></a>フォームのカスタマイズ
フォームデザイナーを使用してエンティティフォームを編集し、次のように変更します。

1. 新しいセクションを作成し、**マップ**などの適切なラベルを指定します。 このセクションにはマップが含まれます。
2. セクションの名前を**section\_map**または_section\_map_で終わる名前 ( **contoso\_section\_map**など) に設定します。 この名前は、マップを表示するタイミングを決定するためにフォームエンジンによってこの名前のセクションが検索されるため、重要です。 
3. 書式設定されたアドレスを格納する新規または既存のフィールドを追加し、前の手順で作成した**マップ**セクションに追加します。
4. 新しいセクションを作成し、適切なラベル ( **Location**など) を指定します。 このセクションには、選択した場所のアドレスフィールドが表示されます。
5. 前の手順で作成した**Location**セクションに、必要なアドレスフィールドを追加します。 
    - アドレス行
    - City
    - 国
    - 都道府県
    - 国/地域
    - 郵便番号
    - 自由
    - 経度

結果のフォームは次のようになります。 これらのフィールドには異なる表示名を選択できます。 また、必要に応じて、これらのセクションをレイアウトすることもできます。

![カスタム地理位置情報フォーム。](../media/custom-geolocation-form.png "カスタム地理位置情報フォーム")

### <a name="site-settings"></a>サイトの設定
マネージフォームのマップ機能を持つ位置情報には、マッピングサービス REST エンドポイントで要求を完了するための構成設定が必要です。 ロケーションサービスを構成するには、次のサイト設定を使用します。

|名前|Value|
|---|---|
|Bingmaps/資格情報|Bing Maps API に対する要求を認証するための一意のキー。 Bing Maps アカウントを作成し、キーを取得するには、 [www.bingmapsportal.com](https://www.bingmapsportal.com)にアクセスしてください。 必須。|
|Bingmaps/restURL|Bing Maps REST API の URL。 省略可能。 値が指定されていない場合は、既定の https://dev.virtualearth.net/REST/v1/Locations が使用されます。|
| |

### <a name="field-configurations"></a>フィールド構成
マップコントロールでは、さまざまな場所フィールドの Id を指定するために追加の構成が必要です。したがって、値を割り当てたり、値を取得したりすることができます。 構成は、マネージフォームの種類によって異なります。

- エンティティフォームについては、「[エンティティフォームの地理位置情報の構成](entity-forms.md#geolocation-configuration-for-entity-forms)」を参照してください。

- Web フォームについては、「 [web フォームの地理位置情報の構成](web-form-properties.md#geolocation-configuration-for-web-form)」を参照してください。
