---
title: ポータルのエンティティ フォームと Web フォーム上に添付の形式で注記を構成する | MicrosoftDocs
description: ポータルのエンティティ フォームと Web フォーム上に添付の形式で注記を追加し構成する方法を説明します。
author: gitanjalisingh33msft
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 06/25/2020
ms.author: gisingh
ms.reviewer: tapanm
ms.openlocfilehash: 60db91f501c7d8de942e9d7721f90584d13cee8b
ms.sourcegitcommit: 2fd873a1ea17f419f6194714efffa47a9bd00c2e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/26/2020
ms.locfileid: "3507362"
---
# <a name="configure-notes-as-attachments-for-entity-forms-and-web-forms-on-portals"></a>ポータルのエンティティ フォームと Web フォームに添付の形式で注記を構成する

サブグリッドと同様に、ポータルの管理されたフォームに注記を簡単に追加できます。 &mdash;[フォーム デザイナーを介して](../model-driven-apps/create-design-forms.md)注記コントロールをモデル駆動型アプリに追加するだけで完了します。 メタデータでメモ コントロールの動作を構成できます。

> [!NOTE]
> 注記がポータルに表示されるようにするには、明示的 [エンティティ アクセス許可](configure/assign-entity-permissions.md) に入力する必要があります。 読み取りと編集には、読み込みおよび書き込み権限が許可される必要があります。 作成には、2 つのアクセス許可が必要です。1 つ目は、メモ (アノテーション) エンティティに付与される作成および追加権限のあるアクセス許可です。2 つ目は、メモの添付先のエンティティの種類に割り当てられる追加先権限のあるアクセス権です。 エンティティのアクセス許可を有効にするには、対応するエンティティ フォームまたは Web フォームのステップで **エンティティのアクセス許可を有効にする** チェック ボックスをオンにする必要があります。

## <a name="notes-configuration-for-entity-forms"></a>エンティティ フォームにおける注記の構成

1. [ポータル管理](https://docs.microsoft.com/powerapps/maker/portals/configure/configure-portal)アプリを開きます。

1. 左のウィンドウから、**コンテンツ**配下にある**エンティ ティフォーム**を選択します :

    ![エンティティ フォーム](media/configure-notes/entity-forms.png)

1. フォームの一覧から、注記の構成を追加するフォームのレコードを選択して開きます。

1. フォーム設定の利用可能なタブから、**エンティティ フォーム メタデータ**を選択します :

    ![エンティティ フォーム メタデータ](media/configure-notes/entity-form-metadata.png)

1. **新たなエンティティ フォームのメタデータ** を選択します :

    ![新たなエンティティ フォームのメタデータ](media/configure-notes/new-entity-form-metadata.png)

1. **タイプ**に**注記**を選択します :

    ![タイプとしての注記](media/configure-notes/type-notes.png)

1. 注記の構成に関する設定画面が表示されます。 ほとんどの設定は既定で折りたたまれています。 セクションを展開すると追加の設定を表示することができます :

    ![ノートのオプション](media/configure-notes/notes-options.png)

1. 適切な値を入力して、フィールドに入力します。 [!include[](../../includes/proc-more-information.md)] [属性](#attributes)、[ダイアログ オプションの作成](#create-dialog-options)、[ダイアログ オプションの編集](#edit-dialog-options)、および [ダイアログ オプションの削除](#delete-dialog-options)

1. フォームを保存します。

コンフィギュレーションを追加すると、ポータルで有効にされた適切なオプションを使用して、注記コントロールが表示されます。

## <a name="attributes"></a>属性


| Name                  | 内容                                                                                                                                                  |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **基本設定**    |                                                                                                                                                              |
| 作成が有効        | エンティティに新しいメモを追加する機能を有効にします。                                                                                                          |
| 作成ダイアログのオプション | **作成が有効**が true のとき、ダイアログ ボックスを構成する設定を含みます。 詳細については、作成ダイアログのオプションを参照してください。                                    |
| 編集が有効          | エンティティの既存のメモを編集する機能を有効にします。                                                                                                    |
| 編集ダイアログのオプション   | **EditEnabled** が true のとき、ダイアログ ボックスを構成する設定を含みます。 詳細については、編集ダイアログのオプションを参照してください。                                         |
| 削除が有効        | エンティティからメモを削除する機能を有効にします。                                                                                                         |
| 削除ダイアログのオプション | **DeleteEnabled** が true のとき、ダイアログ ボックスを構成する設定を含みます。 詳細については、削除ダイアログのオプションを参照してください。                                     |
|添付ファイルの場所 | 添付ファイルの場所を選択します。<ul><li>メモ添付ファイル</li><li>Azure Blob Storage</li></ul>|
|MIME の種類を承認 | 承認された MIME の種類の一覧を指定できます。 |
|MIME の種類の制限 | MIME の種類を制限するかまたは許可するかを選択します。|
|最大ファイル サイズ (KB) |添付できるファイルの最大サイズを指定できます。 |
| **詳細設定** |                                                                                                                                                              |
| リスト タイトル            | メモ領域の上のタイトルを指定します。                                                                                                                     |
| メモ追加ボタンのラベル | [メモの追加] ボタンのラベルを無効にします。                                                                                                                 |
| メモのプライバシー ラベル    | メモがプライベートかどうかを示すラベルを指定します。                                                                                                         |
| 読み込み中のメッセージ       | メモの一覧の読み込み中に表示するメッセージを指定します。                                                                                              |
| エラー メッセージ         | メモの一覧の読み込み中にエラーが発生した場合に表示されるメッセージを指定します。                                                                     |
| アクセス拒否メッセージ | ユーザーに注記の一覧を表示するアクセス許可がない場合に表示されるメッセージを無効にします。                                                    |
| 空のメッセージ         | 現在のエンティティに表示できるメモがない場合に表示されるメッセージを指定します。                                                              |
| リストの表示順序           | メモが表示される順序を設定できます。 リストの順序設定では、以下の内容を設定することができます。 <ul><li>属性: 並べ替えの基準にする列の論理名</li><li>エイリアス: クエリのエイリアス属性</li><li>向き: 昇順 (最小から最大、または最初から最後)、または降順 (最大から最小、または最後から最初)。</li></ul>  ![リストの順序の属性を設定する](media/set-attributes-list-orders.png "リストの順序の属性を設定する") <br>  並べ替えルールを追加するには、 列 (4) を選択し、詳細を入力します。 一覧の順序は、最も優先度の高いほうがリストの最上部になるように並べ替え処理されます。|
||

## <a name="create-dialog-options"></a>作成ダイアログのオプション

| Name                               | 内容                                                                                                                                 |
|------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| **基本設定**                 |                                                                                                                                             |
| プライバシー オプション フィールドの表示      | [メモの追加] ダイアログ ボックスで、ユーザーが添付するメモをプライベートとしてマークすることができるチェック ボックスを有効にします。                                                   |
| プライバシー オプション フィールドの既定値 | [プライバシー オプション フィールドの表示] チェックボックスの既定値を指定します。 このフィールドの既定値は False です。                     |
| 添付ファイルの表示                | [メモの追加] ダイアログ ボックスで、ファイル アップロード フィールドを有効にして、ユーザーがメモにファイルを添付できるようにします。                                             |
| ファイル添付の承認                 | ファイル アップロードの入力で許可する MIME タイプ。                                                                                            |
| **詳細設定**              |                                                                                                                                             |
| メモ フィールドのラベル                   | [メモの追加] ダイアログ ボックスで、メモ フィールドのラベルをオーバライドします。                                                                              |
| メモ フィールドの列                 | メモの &lt;textarea&gt; のカラム値を設定する                                                                                            |
| メモ フィールドの行                    | メモの &lt;textarea&gt; の行値を設定                                                                                            |
| プライバシー オプション フィールドのラベル         | プライバシー オプション フィールドのラベルを指定します (有効な場合)。                                                                              |
| 添付ファイルのラベル                  | 添付ファイル フィールドのラベルを指定します (有効な場合)。                                                                                  |
| 左列 CSS クラス              | [メモの追加] ダイアログ ボックスのラベルがある左端の列に CSS クラス (複数可) を追加します。                                                  |
| 右列 CSS クラス             | [メモの追加] ダイアログ ボックスのフィールド入力がある右端の列に CSS クラス (複数可) を追加します。                                           |
| タイトル                              | [メモの追加] ダイアログ ボックスのヘッダーの HTML テキストをオーバライドします。                                                                               |
| プライマリ ボタン テキスト                | ダイアログ ボックスのプライマリ (メモの追加) ボタンに表示される HTML をオーバライドします。                                                           |
| 解除ボタンの SR のテキスト             | ダイアログ ボックスの解任ボタンに関連付けられたスクリーン リーダー テキストをオーバライドします。                                                               |
| 閉じるボタン テキスト                  | ダイアログ ボックスの閉鎖 (キャンセル) ボタンに表示される HTML をオーバライドします。                                                               |
| サイズ                               | [メモの追加] ダイアログ ボックスのサイズを指定します。 オプションは既定値、大きい、小さいです。 [メモの追加] ダイアログ ボックスの既定サイズは既定です。 |
| CSS クラス                          | 表示されるダイアログ ボックスに適用される CSS クラスを指定します。                                                                |
| タイトル CSS クラス                    | 表示されるダイアログ ボックスのタイトル バーに適用される CSS クラスを指定します。                                                    |
| プライマリ ボタン CSS クラス           | ダイアログ ボックスの主ボタン (メモの追加) に適用される CSS クラス (複数可) を指定します。                                            |
| 閉じるボタン CSS クラス             | ダイアログ ボックスの閉じる (キャンセル) ボタンに適用される CSS クラスを指定します。                                                |
|||

## <a name="edit-dialog-options"></a>編集ダイアログのオプション

| Name                               | 説明                                                                                                                                   |
|------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| **基本設定**                 |                                                                                                                                               |
| プライバシー オプション フィールドの表示      | [メモの編集] ダイアログ ボックスで、ユーザーが添付するメモをプライベートとしてマークすることができるチェック ボックスを有効にします。  |
| プライバシー オプション フィールドの既定値 | [プライバシー オプション フィールドの表示] チェックボックスの既定値を指定します。 このフィールドの既定値は False です。   |
| 添付ファイルの表示                | [メモの編集] ダイアログ ボックスで、ファイル アップロード フィールドを有効にして、ユーザーがメモにファイルを添付できるようにします。                      |
| ファイル添付の承認                 | ファイル アップロードの入力で許可する MIME タイプ。 |
| **詳細設定**              |                                                                                              |
| メモ フィールドのラベル                   | [メモの編集] ダイアログ ボックスで、メモ フィールドのラベルをオーバライドします。|
| メモ フィールドの列                 | メモの &lt;textarea&gt; のカラム値を設定する                                                                                             |
| メモ フィールドの行                    | メモの &lt;textarea&gt; の行値を設定                                                                                             |
| プライバシー オプション フィールドのラベル         | プライバシー オプション フィールドのラベルを指定します (有効な場合)。                                                                                
| 添付ファイルのラベル                  | 添付ファイル フィールドのラベルを指定します (有効な場合)。                                                                                   |
| 左列 CSS クラス              | [メモの編集] ダイアログ ボックスのラベルがある左端の列に CSS クラス (複数可) を追加します。                                                  |
| 右列 CSS クラス             | [メモの編集] ダイアログ ボックスのフィールド入力がある右端の列に CSS クラス (複数可) を追加します。                                           |
| タイトル                              | [メモの編集] ダイアログ ボックスのヘッダーの HTML テキストをオーバライドします。                                                                               |
| プライマリ ボタン テキスト                | ダイアログ ボックスのプライマリ (メモの更新) ボタンに表示される HTML をオーバライドします。                                                         |
| 解除ボタンの SR のテキスト             | ダイアログ ボックスの解任ボタンに関連付けられたスクリーン リーダー テキストをオーバライドします。                                                                |
| 閉じるボタン テキスト                  | ダイアログ ボックスの閉鎖 (キャンセル) ボタンに表示される HTML を上書きします。                                                                |
| サイズ                               | [メモの編集] ダイアログ ボックスのサイズを指定します。 オプションは既定値、大きい、小さいです。 [メモの編集] ダイアログ ボックスの既定サイズは既定です。|
| CSS クラス                          | 表示されるダイアログ ボックスに適用される CSS クラスを指定します。                                                                 |
| タイトル CSS クラス                    | 出力されるダイアログのタイトル バーに適用される CSS クラスを指定します。                                                     |
| プライマリ ボタン CSS クラス           | ダイアログ ボックスの主ボタン (メモの更新) に適用される CSS クラス (複数可) を指定します。                                          |
| 閉じるボタン CSS クラス             | ダイアログ ボックスの閉じる (キャンセル) ボタンに適用される CSS クラスを指定します。                                                 |
|||

## <a name="delete-dialog-options"></a>削除ダイアログのオプション

| Name                     | 説明                                                                                                                                       |
|--------------------------|------------------------------|
| **基本設定**       |                                                                                                                                                   |
| 確認             | メモを削除するときの確認メッセージを指定します。                                                                                             |
| **詳細設定**    |                                                                                                                                                   |
| タイトル                    | [メモの削除] ダイアログ ボックスのヘッダーの HTML テキストをオーバライドします。                                                                                  |
| プライマリ ボタン テキスト      | ダイアログ ボックスの基本 (削除) ボタンに表示される HTML をオーバライドします。                                                                   |
| 解除ボタンの SR のテキスト   | ダイアログ ボックスの解任ボタンに関連付けられたスクリーン リーダー テキストをオーバライドします。                                                                     |
| 閉じるボタン テキスト        | ダイアログ ボックスの閉鎖 (キャンセル) ボタンに表示される HTML をオーバライドします。                                                                     |
| サイズ                     | [メモの削除] ダイアログ ボックスのサイズを指定します。 オプションは既定値、大きい、小さいです。 [メモの削除] ダイアログ ボックスの既定サイズは既定です。 |
| CSS クラス                | 表示されるダイアログ ボックスに適用される CSS クラスを指定します。                                                                      |
| タイトル CSS クラス          | 表示されるダイアログ ボックスのタイトル バーに適用される CSS クラスを指定します。                                                          |
| プライマリ ボタン CSS クラス | ダイアログ ボックスのプライマリ (削除) ボタンに適用される CSS クラスを指定します。                                                    |
| 閉じるボタン CSS クラス   | ダイアログ ボックスの閉じる (キャンセル) ボタンに適用される CSS クラスを指定します。                                                      |
|||

### <a name="assign-entity-permissions"></a>エンティティのアクセス許可を割り当てる

次のように、レコードに適切なエンティティ アクセス許可を作成して割り当てる必要があります。そうでない場合は、注記の**追加**、**編集**、そして**削除**ボタンは非表示になります。

- スコープが**グローバル**となっている**注釈**エンティティの読み取り、書き込み、作成、追加、および追加権限を設定します。 このエンティティのアクセス許可は、ユーザーの Web ロールに関連付けられている必要があります。
- 注記コントロールが有効になっているエンティティの読み取り、書き込み、作成、追加、および追加権限。 たとえば、取引先、連絡先、または潜在顧客エンティティのエンティティフォームに対して注記を表示します。 スコープは**グローバル**へ送られます。 このエンティティのアクセス許可は、ユーザーの Web ロールに関連付けられている必要があります。

    ![エンティティのアクセス許可を追加する](media/configure-notes/entity-permission.png "エンティティのアクセス許可を追加する")

    ![Web ロールをエンティティのアクセス許可へ追加する](media/entity-permission-web-roles.png "Web ロールをエンティティのアクセス許可へ追加する")

> [!IMPORTANT]
> ポータルを使用してノートを編集または削除するには、ユーザーがサイン インすることと、ユーザーがこのメモの作成者である必要があります。 エンティティのアクセス許可を割り当てても、他のユーザーが作成したメモを編集や削除をすることはできません。

顧客フォームを作成しそれに注記セクションを追加した場合、既定タブとして表示されるために**注記**を必ず選択してください。

![顧客フォーム内の注記](media/notes-activities-tab.png "顧客フォーム内の注記")

### <a name="enable-file-attachment-on-form"></a>フォーム上で添付ファイルを有効にする

注釈で利用可能な添付オプションが表示するには、**エンティティフォーム**で**ファイルを添付する**オプションを有効にする必要があります。 

エンティティ フォーム上で添付を有効化にするには :

1. [ポータル管理](https://docs.microsoft.com/powerapps/maker/portals/configure/configure-portal)アプリを開きます。

1. 左のウィンドウから、**コンテンツ**配下にある**エンティ ティフォーム**を選択します :

    ![エンティティ フォーム](media/configure-notes/entity-forms.png)

1. フォームの一覧から、注記の構成を追加するフォームのレコードを選択して開きます。

1. フォームの**追加設定**を選択します。 [添付オプション](#additional-settings-for-file-attachment)で説明されているフィールドに従って追加設定を構成する必要があります :

    ![追加設定 - ファイルの添付](media/configure-notes/additional-settings.png)

#### <a name="additional-settings-for-file-attachment"></a>ファイル添付の追加設定

| 件名 | 内容
| - | - 
| ファイルの​​添付 | フォームで添付ファイルを有効にするには、ボックスをオンにします。
| 添付ファイルの保存オプション | **注記**または**ポータルのコメント**を選択して、添付ファイルを保存します。 注記の添付については、**注記**を選択します。
| 複数ファイルの許可 | 複数の添付ファイルを許可するには、チェック ボックスをオンにします。
| ラベル | 添付オプションのラベル。
| 添付ファイルの保存場所 | 添付ファイルの場所を選択します。<ul><li>メモ添付ファイル</li><li>Azure Blob Storage</li></ul>
| MIME の種類を承認 | 承認された MIME の種類の一覧を指定できます。
| ファイルの種類を承認 | **添付ファイルの保存オプション**の、**ポータルコメント**オプションを使用している場合のみ利用可能です。 承認されたファイルの種類の一覧を指定できます。

### <a name="attach-file-option"></a>添付ファイルのオプション

注記を設定し、ノートの添付を有効にすると、フォームに**ファイルの添付**オプションが表示されます :

![添付ファイルのオプション](media/configure-notes/attach-file-option.png)

### <a name="notes-created-with-rich-text-editor"></a>リッチ テキスト エディターで作成されたメモ

ポータルの Web ページでは、[タイムラインのリッチ テキスト エディター](https://docs.microsoft.com/powerapps/maker/model-driven-apps/set-up-timeline-control#enable-or-disable-rich-text-editor-for-notes-in-timeline)を使用して作成されたメモを表示できます。 この場合は、編集をしようとすると、テキストが HTML マークアップ形式で表示されます。

たとえば、このメモはモデル駆動型アプリのリッチテキスト形式を示しています。

![Dynamics 365 フォーム](media/configure-notes/dynamics-365-form.png)

ポータルの Web ページには、メモがリッチ テキスト形式で表示されます。

![ポータル フォーム](media/configure-notes/portals-form.png)

ただし、ポータル Web ページからメモを編集すると、HTML マークアップ形式でメモが表示されます。

![編集時にHTMLで表示さたポータル フォーム](media/configure-notes/portals-form-edit.png)

> [!IMPORTANT]
> ポータルを使用してHTMLマークアップ付きのメモを保存しようとすると、次のエラーが表示されます。*申し訳ございません。不具合が発生しました。もう一度お試しください。問題が解決しない場合は、Web サイト管理者にお問い合わせください。* ポータルを使用して HTML マークアップでメモを保存するには、リクエストの検証を無効化する必要があります。 この場合、リクエストの検証を無効化すると、Web サイト全体に適用されます。 リクエストの検証を無効化する手順と、その影響を理解するには、[リクエストの検証](configure/entity-forms.md#request-validation)にアクセスしてください。

## <a name="notes-configuration-for-web-forms"></a>Web フォームの注記コンフィギュレーション

Web フォームの注記は、[エンティティ フォームの注記](#notes-configuration-for-entity-forms) と同じ方法で構成されます。 最初に注記を含む Web フォーム ステップのメタデータ レコードを作成し、注記の構成メタデータを追加する必要があります。

> [!NOTE]
> メモの説明をポータル上に表示するためには、**\*WEB\*** (*前後にアスタリスク (\*) が付いた'WEB' キーワード*) を持つ接頭辞を使用する必要があります。
