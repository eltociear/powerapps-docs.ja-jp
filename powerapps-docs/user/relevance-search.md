---
title: 関連性の検索 |MicrosoftDocs
ms.custom: ''
author: mduelae
manager: kvivek
ms.service: powerapps
ms.component: pa-user
ms.topic: conceptual
ms.date: 1/28/2020
ms.author: mduelae
ms.reviewer: ''
ms.assetid: ''
search.audienceType:
- enduser
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 3a78e555c8818144b41935715ab9f983c7d9714b
ms.sourcegitcommit: 303d5aed44f2bbb406cabeb6b9c8474d738d9114
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/01/2020
ms.locfileid: "76918784"
---
# <a name="using-relevance-search-to-search-for-records"></a>関連性検索を使用したレコードの検索

## <a name="what-is-relevance-search"></a>関連性検索とは

関連性検索では、複数のエンティティにわたる高速で包括的な結果を1つのリストにして、関連性によって並べ替えます。 Common Data Service ([!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)]) の外部で専用の検索サービスを使用して、検索のパフォーマンスを向上させます。
  
関連性検索では、次のような機能強化と利点が得られます。  
<!--note from editor: Edits to these list items are suggested, so they can be parallel throughout this section.-->  
- 外部インデックス作成と [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] 検索テクノロジを使用してパフォーマンスを向上させます。  
  
- 検索語句のすべての単語が1つのフィールドに存在する必要がある場合、クイック検索と比較して、エンティティ内の任意のフィールドの検索語句に一致する単語を検索します。 

- **ストリーム**、**ストリーミング**、ストリームなどの変化形語を含む一致項目を検索し**ます。**  
  
- 検索可能なすべてのエンティティの結果を、関連性によって並べ替えられた1つのリストに返します。一致した場合は、一覧に表示される結果が大きくなります。 検索語句のより多くの単語が相互に近接している場合は、一致する関連性が高くなります。 検索語が見つかるテキストの量が少ないほど、関連性が高くなります。 たとえば、会社名と住所に検索語句が含まれている場合、長い記事では、互いに離れた場所にある同じ語句を検索するよりも、一致する方が適している可能性があります。
  
- 結果一覧の一致項目を強調表示します。 検索用語がレコード内の語句と一致すると、検索結果には太字で斜体のテキストとして語句が表示されます。 

    > [!NOTE]
    > - 言語 **(やなど**) でよく使用される特定の単語は、検索時には無視されます。**これは、** レコードを一意に識別できないためです。 検索中は無視されるため、これらの単語も結果で強調表示されません。
    > - 強調表示された用語は、一致した用語だけが強調表示されるため、フィールドの全値の一部として返されることがよくあります。  

- メモ内のテキスト、電子メールの添付ファイル、予定など、Common Data Service に格納されているドキュメント内のテキストの検索結果が含まれます。 検索では、PDF、Microsoft Office ドキュメント、HTML、XML、ZIP、EML、プレーンテキスト、JSON の各ファイル形式がサポートされています。  
  
- 自分が所有しているレコードと共有されているレコードを検索できます。  
  
  > [!NOTE]
  >  階層型セキュリティモデルはサポートされていません。 Common Data Service に行がある場合でも、階層セキュリティによってアクセスできるため、関連検索に結果が表示されません。  
  
- では、オプションセットと参照を検索することもできます。 たとえば、名前に**製薬**がある小売店のアカウントを検索するとします。 **製薬小売**を検索すると、業界フィールド (検索可能なオプションセット) に一致するものがあるため、結果が得られます。

  > [!NOTE]
  > - 関連性検索はテキストベースであり、単一行のテキスト、複数行のテキスト、オプションセット、または参照のフィールドのみを検索できます。 数値データ型または日付データ型のフィールドの検索はサポートされていません。
  
- 検索用語で構文を使用して、必要な結果を得ることができます。 たとえば、検索結果の検索語句に一致する単語が含まれるように、「 **car シルバー 2-ドア**」と入力します。 「 **Car + シルバー +2** 」と入力すると、3つの単語すべてを含む一致のみが検索されます。 「 **Car&#124;シルバー&#124;2-ドア**」と入力して、**自動車**、**シルバー** 、または**2 扉**、または3つのすべての単語を含む結果を取得します。 検索クエリで使用できる構文の詳細については、「 [Azure Cognitive Search の単純なクエリ構文](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search)」を参照してください。<!--note from editor: The "More information:" pattern is good when there aren't any additional modifiers, which you have here. -->
  
  > [!NOTE]
  > 関連性検索は、クエリの条件のいずれか (すべてではなく) に一致することを要求するように構成されています。これにより、期待とは異なる結果が得られる可能性があります。 これは特に、ブール演算子がクエリに含まれている場合に当てはまります。<!--note from editor: Via style guide, it's always capital "Boolean," and it's "might" instead of "may.-->

## <a name="enable-relevance-search"></a>関連性検索を有効にする

既定では、関連検索は無効になっています。 管理者は、組織でこれを有効にする必要があります。これにより、組織内のすべてのユーザーがそれを使用できるようになります。 関連性の検索を有効にした後、組織のサイズによっては、アプリの関連性の検索結果を確認する前に、最大1時間以上待つ必要がある場合があります。 インデックス付きデータの変更が少ないほど、システムに表示されるまでに最大15分かかることがあります。

## <a name="switch-between-relevance-search-and-categorized-search"></a>関連性検索と分類された検索の切り替え

組織で両方の検索オプション (関連性検索と分類検索) をオンにしている場合は、2つを切り替えることができます。

1. 検索の種類を切り替えるには、ナビゲーションバーで **[検索]** を選択します。

2. 左側のドロップダウンメニューを選択して、関連性のある**検索**または**分類**された検索を切り替えます。

   > [!div class="mx-imgBorder"]
   > ![関連性と分類された検索の切り替え](media/switch-global-search.png "関連性検索と分類された検索の切り替え") 
    
## <a name="set-a-default-search-experience"></a>既定の検索エクスペリエンスの設定

組織で両方の検索オプションが有効になっている場合は、個人用の設定で既定の検索エクスペリエンスを選択できます。

1. ページの右上隅にある **[設定]** を選択し、 **[個人用設定]** を選択します。  
  
   > [!div class="mx-imgBorder"]
   > ![パーソナル化の設定](media/personalization-settings.png "パーソナル化の設定")  

2. **[全般]** タブの **[既定の検索エクスペリエンスの選択]** セクションで、**既定の検索エクスペリエンス**として、既定のエクスペリエンスを選択します。 

   > [!div class="mx-imgBorder"]
   > ![既定の検索エクスペリエンスを選択する](media/default-search-experience.png "既定の検索エクスペリエンスを選択する")  

## <a name="start-a-search"></a>検索を開始する 
 
1.  上部のナビゲーションバーで、 **[検索]** を選択します。  

    > [!div class="mx-imgBorder"]
    > ![グローバル検索ボタン](media/global-search-button.png "グローバル検索") 
  
2.  検索ボックスに検索語句を入力し、 **[検索]** を選択します。

    > [!div class="mx-imgBorder"]
    > ![関連性の検索ボックス](media/relevance-search-box.png "関連性の検索ボックス")   

## <a name="filter-records-with-facets"></a>ファセットを使用したレコードのフィルター処理

Common Data Service では、ファセットとフィルターを使用して検索結果を絞り込むことができるようになりました。 ファセットとフィルターを使用すると、検索語句を繰り返し調整することなく、現在の検索結果を掘り下げて調査することができます。

ファセットは、左端のウィンドウで使用できます。 検索を実行するとすぐに、次のグローバルファセットが4つの共通フィールドで使用できるようになります。  
  
-   レコードの種類  
  
-   所有者  
  
-   作成日  
  
-   変更日  
  
### <a name="record-type-facets"></a>レコードの種類のファセット

検索結果を特定のエンティティに絞り込むには、[レコードの**種類**] セクションでエンティティを選択します。  
 
  > [!div class="mx-imgBorder"]
  > ![検索結果を絞り込むためのレコードの種類のファセット](media/relevance-search-record-type-facet.png "検索結果を絞り込むために使用されるレコード型のファセット")  
  
特定のレコードの種類をフィルター処理すると、選択したレコードに関連するアクティビティとメモを検索結果に含めることができます。 これを行うには、 **[関連するメモ & 活動]** チェックボックスをオンにします。 アクティビティとメモがトップレベルの結果に表示されます。
 
  > [!div class="mx-imgBorder"]
  > ![レコードの種類に関連するメモとアクティビティを検索結果に含める](media/relevance-search-record-type-facet-related-notes-activities.png "レコードの種類に関連するメモとアクティビティを検索結果に含める")  
  
電子メールの添付ファイルまたは予定のエンティティで見つかった検索結果は、検索結果の親レコード (電子メールまたは予定) に表示されます。  
  
レコードの種類によって絞り込んだ場合、ファセットのスコープは選択されたエンティティに切り替わり、エンティティに固有の最大4つのファセットが表示されます。 たとえば、Account エンティティを選択した場合は、グローバルファセットに加えて**主要な Contact**ファセットが表示されます。  
  
**[個人用オプションの設定]** ダイアログボックスでは、システム管理者または顧客が使用できるようにした他のファセットを選択することもできます。 ユーザー設定は、既定の設定よりも優先されます。 [検索用のファセットとフィルターを構成 [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] には](#BKMK_ConfigureFacets)  
  
### <a name="text-based-facets"></a>テキストベースのファセット

すべての参照、オプションセット、およびレコードの種類は、テキストベースのファセットです。 たとえば、テキストベースのファセット所有者は、フィールド値のリストとそれに対応するカウントで構成されます。  
 
  > [!div class="mx-imgBorder"]
  > ![関連性のある検索でのテキストベースのファセット](media/relevance-search-text-based-facets.png "関連性のある検索でのテキストベースのファセット")  
  
これらのファセット内のフィルターは、カウント順に降順に並べ替えられます。 既定では、上位4つのファセット値が表示されます。 4つ以上のファセット値がある場合は、 **[詳細を表示]** リンクが表示されます。このリンクを選択すると、一覧を展開し、最大15個のファセット値を表示できます。 各値を選択すると、検索結果をフィルター処理して、フィールドに選択した値が含まれているレコードのみが表示されるようにすることができます。 たとえば、 **[Jim Glynn]** を選択した場合、所有者が jim Glynn であるすべてのレコードが検索結果に表示されます。 参照またはオプションセットのファセット値を選択すると、指定した値を持つレコードだけが検索結果にフィルター処理されます。  
  
### <a name="date-and-time-facets"></a>日付と時刻のファセット

他のファセットと同様に、日付と時刻のファセットを使用して、特定の時刻の検索結果をフィルター処理したり表示したりすることができます。 値の範囲を選択するには、スライダーをドラッグするか、垂直方向の列の1つを選択します。  
 
  > [!div class="mx-imgBorder"]
  > ![関連検索の日付と時刻のファセット](media/relevance-search-date-time-facets.png "関連検索の日付と時刻のファセット")  

<a name="BKMK_ConfigureFacets"></a>

## <a name="configure-facets-and-filters"></a>ファセットとフィルターを構成する
  
> [!NOTE]
>  システムカスタマイザーは、すべてのエンティティの既定のエクスペリエンスを設定できますが、独自のファセットとフィルターを構成することができます。  
  
1. 右上隅にある **[設定]** を選択し、 **[個人用設定]** を選択します。  
  
   > [!div class="mx-imgBorder"]
   > ![パーソナル化の設定](media/personalization-settings.png "パーソナル化の設定")
  
2. **[全般]** タブの **[既定の検索エクスペリエンスを選択]** します セクションで、 **[ファセットとフィルター]** フィールドの **[構成]** を選択します。  

   > [!div class="mx-imgBorder"]
   > ![ファセットとフィルターを構成する](media/configure-facets-filters.png "ファセットとフィルターを構成する")  
  
3. **[ファセットとフィルターの構成]** ダイアログボックスで、エンティティに対して表示するファセットを指定します。 システム管理者またはカスタマイザーは、すべてのエンティティに既定のエクスペリエンスを設定できますが、ここで独自の設定を行うことができます。  
  
   - **[エンティティの選択**] ドロップダウンリストで、ファセットを構成するエンティティを選択します。 このドロップダウンリストには、関連性検索が有効になっているエンティティのみが表示されます。  
  
   - 選択したエンティティに対して、最大4つのファセットフィールドを選択します。 既定では、選択したエンティティの **[クイック検索]** ビューの最初の4つの "ファセット可能" フィールドが一覧で選択されます。 常に、ファセットとして選択できるフィールドは4つだけです。  
  
   複数のエンティティを一度に更新できます。 **[OK]** を選択すると、構成したすべてのエンティティに対する変更が保存されます。 以前に構成したエンティティの既定の動作に戻すには、 **[既定]** を選択します。  
  
   > [!NOTE]
   > - システムカスタマイザーによってフィールドが削除されるか、または検索できなくなり、そのフィールドのファセットが保存されている場合は、ファセットとして表示されなくなります。  
   >   -   既定のソリューションに存在し、システムカスタマイザーによって検索可能として構成されているフィールドのみが表示されます。  
