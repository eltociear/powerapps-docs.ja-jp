---
title: モデル駆動型アプリでレコードを検索する |MicrosoftDocs
ms.custom: ''
author: mduelae
manager: kvivek
ms.service: powerapps
ms.component: pa-user
ms.topic: conceptual
ms.date: 10/03/2019
ms.author: mduelae
ms.reviewer: ''
ms.assetid: ''
search.audienceType:
- enduser
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 26903543232025f43f935a403800ed27170e3123
ms.sourcegitcommit: 7c1e70e94d75140955518349e6f9130ce3fd094e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/29/2019
ms.locfileid: "71940907"
---
# <a name="search-for-records-in-an-app"></a>アプリでレコードを検索する

Common Data Service では、関連性の検索または分類された検索を使用して、複数のエンティティにわたるレコードを検索できます。 

- 関連性検索では、複数のエンティティにわたる高速で包括的な結果を1つのリストにして、関連性によって並べ替えます。 Common Data Service ([!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)]) の外部で専用の検索サービスを使用して、検索のパフォーマンスを向上させます。 
- 分類された検索は、アカウント、連絡先、潜在顧客などのエンティティの種類別にグループ化された検索結果を返します。

通常、分類された検索は、既定の検索オプションです。 ただし、関連性検索が組織によって有効になっている場合は、既定の検索エクスペリエンスになります。  

1つの種類のレコードのみを検索するには、エンティティのグリッドの [クイック検索] ビューを使用します。
  
## <a name="normal-quick-find-categorized-search"></a>通常のクイック検索 (分類された検索) 

分類を使用すると、特定の単語で始まるレコードを検索したり、ワイルドカードを使用したりできます。
  
- 次**で始まる**: 結果には、特定の単語で始まるレコードが含まれます。 たとえば、"Alpine Ski House" を検索する場合は、検索ボックスに「 **alp** 」と入力します。「 **ski**」と入力した場合、レコードは表示されません。  
  
- **ワイルドカード**: たとえば、* ski または * ski\*です。 
  
## <a name="relevance-search"></a>関連性の検索
  
  関連検索は、既に使い慣れているその他の Common Data Service 検索に加えて利用できます。 エンティティグリッドまたは複数エンティティのクイック検索 (関連性の検索が有効になっている場合は、分類された検索と呼ばれます) で、単一エンティティのクイック検索を引き続き使用できます。 より包括的で高速な結果を得るには、関連性の検索を使用することをお勧めします。  

 関連性検索では、次のような機能強化と利点が得られます。  
  
- 外部インデックス作成と [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] 検索テクノロジを使用してパフォーマンスを向上させます。  
  
- エンティティ内の任意のフィールド内の検索語句に一致する単語を検索します。 一致には、**ストリーム**、**ストリーミング**、ストリーミングなどの変化形語を含めることができ**ます。**  
  
- 一致した単語の数や、テキスト内での相互の近接度などの要因に基づいて、検索可能なすべてのエンティティの検索結果を関連性で並べ替えて返します。  
  
- 結果一覧の一致項目を強調表示します。  

- Common Data Service に格納されているドキュメント内のテキストの検索結果を検索します。これには、ノート内のテキスト、電子メールの添付ファイル、予定などが含まれます。 検索では、PDF、Microsoft Office ドキュメント、HTML、XML、ZIP、EML、プレーンテキスト、JSON の各ファイル形式がサポートされています。  
  
- 自分が所有しているレコードと共有されているレコードを検索できます。  
  
  > [!NOTE]
  >  階層型セキュリティモデルはサポートされていません。  Common Data Service に行がある場合でも、階層セキュリティによってアクセスできるため、関連検索に結果が表示されません。  
  
- また、オプションセットと参照を検索することもできます。 たとえば、名前に**製薬**がある小売店のアカウントを検索するとします。 **製薬小売**を検索すると、業界フィールド (検索可能なオプションセット) に一致するものがあるため、結果が得られます。  
  
  結果にはエンティティが混在している可能性があるため、[**フィルター**条件] ドロップダウンリストでエンティティを選択することで、検索結果を特定のエンティティに絞り込むことができます。 特定のレコードの種類をフィルター処理すると、選択したレコードに関連するアクティビティとメモを検索結果に含めることができます。 これを行うには、[**フィルター**条件] ボックスの一覧の右側にある [**選択したレコードのアクティビティとメモを検索**する] チェックボックスをオンにします。 このチェックボックスは、 **[フィルター]** ドロップダウンリストでレコードを選択した後に選択されます。 **[フィルター]** ボックスの一覧でエンティティを選択しなかった場合は、クリアされます。 アクティビティとメモは、最上位レベルの結果として返されます。
  
  > [!NOTE]
  > - 既定では、関連検索は無効になっています。 管理者は、組織に対してこれを有効にする必要があります。 関連性の検索を有効にした後、組織のサイズによっては、アプリの関連性の検索結果を確認する前に、最大1時間以上待つ必要がある場合があります。 インデックス付きデータの変更が少ないほど、システムに表示されるまでに最大15分かかることがあります。
  > - 関連性検索を有効にすると、組織内のすべてのユーザーがそれを使用できるようになります。  
  > - 関連性検索はテキストベースであり、単一行のテキスト、複数行のテキスト、オプションセット、または参照のフィールドのみを検索できます。 数値データ型または日付データ型のフィールドの検索はサポートされていません。 
  
 関連性検索では、エンティティ内の任意のフィールドの検索語句に一致する単語が検索されますが、[クイック&mdash;検索] では、フルテキスト検索が有効になっている場合でも、検索語句のすべての単語が1つのフィールドに含まれている必要があり&mdash;ます。  
  
 関連性の高い検索では、一致率が高いほど、結果に表示されます。 検索語句のより多くの単語が相互に近接している場合は、一致する関連性が高くなります。 検索語が見つかるテキストの量が少ないほど、関連性が高くなります。 たとえば、検索語が会社名と住所で見つかった場合は、大規模な記事で見られる言葉とは遠く離れているものと一致していることがあります。 結果は1つの一覧に表示されるため、アカウント、営業案件、潜在顧客などのレコードが1つずつ表示されていることを確認できます。 リスト内の一致する単語が強調表示されます。  
  
 検索語句で構文を使用して、必要な結果を取得します。 たとえば、検索結果の検索語句に一致する単語が含まれるように、「 **car シルバー 2-ドア**」と入力します。 「 **Car + シルバー +2** 」と入力すると、3つの単語すべてを含む一致のみが検索されます。 「 **Car&#124;シルバー&#124;2-ドア**」と入力して、**自動車**、**シルバー** 、または**2 扉**、または3つのすべての単語を含む結果を取得します。 検索クエリで使用できる構文の詳細については、「 [Azure Search の単純なクエリ構文」](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search)を参照してください。


> [!NOTE]
> 検索用語がアプリの用語と一致すると、ヒットの強調表示が表示されます。 ヒットの強調表示は、検索結果に太字と斜体のテキストとして表示されます。 これらは、一致した用語だけが強調表示されるため、フィールドの完全な値の一部として返されることがよくあります。 
  
  
<a name=" #BKMK_DefaultOption "></a>
## <a name="switch-between-relevance-and-categorized-search"></a>関連性と分類された検索の切り替え

組織で両方の検索オプション (関連性と分類された検索) をオンにしている場合は、2つを切り替えることができます。

1. 検索の種類を切り替えるには、ナビゲーションバーで **[検索]** ボタンを選択します。

2. 左側のドロップダウンメニューを選択して、関連性のある**検索**または**分類**された検索を切り替えます。

   > [!div class="mx-imgBorder"]
   > ![関連性と分類された検索の切り替え](media/switch-search.png "関連性と分類された検索の切り替え") 
    
### <a name="set-a-default-experience"></a>既定のエクスペリエンスを設定する

組織で両方の検索オプションが有効になっている場合は、個人用の設定で既定の検索エクスペリエンスを選択できます。

1. ページの右上隅にある **[設定]** を選択し、 **[個人用設定]** を選択します。  
  
   > [!div class="mx-imgBorder"]
   > ![既定の検索エクスペリエンスを選択する](media/relevance-search-personal-settings.png "既定の検索エクスペリエンスを選択する")  

2. **[全般]** タブの **[既定の検索エクスペリエンスの選択]** セクションで、**既定の検索エクスペリエンス**として、既定のエクスペリエンスを選択します。 

   > [!div class="mx-imgBorder"]
   > ![既定の検索エクスペリエンスを選択する](media/default.png "既定の検索エクスペリエンスを選択する")  
 


## <a name="start-a-search"></a>検索を開始する 
 
1.  上部のナビゲーションバーから、 **[検索]** ボタンを選択します。  
  
2.  検索ボックスに検索語句を入力し、 **[検索]** ボタンを選択します。   

    > [!div class="mx-imgBorder"]
    > ![検索オプション](media/search-option.png "検索オプション")  
  
## <a name="filter-categorized-search-results"></a>分類された検索結果のフィルター処理 
  
-   1つのレコードの種類で結果をフィルター処理するには、[検索] 画面で、[**フィルター**条件] ボックスの一覧からレコードの種類を選択します。  
  
-   すべてのレコードの種類を検索するには、 **[フィルター条件]** ドロップダウンボックスで **[なし]** を選択します。  

    > [!div class="mx-imgBorder"]
    > ![検索のフィルター処理](media/filter-search.png "検索のフィルター処理")  

## <a name="filter-records-with-facets-works-with-relevance-search"></a>ファセットを使用してレコードをフィルター処理する (関連性のある検索で機能します)  
 Common Data Service では、ファセットとフィルターを使用して検索結果を絞り込むことができるようになりました。 ファセットは左ペインで使用できます。 検索を実行するとすぐに、次のグローバルファセットが4つの共通フィールドで使用できるようになります。  
  
-   レコードの種類  
  
-   Owner  
  
-   作成日  
  
-   変更日  
  
### <a name="record-type-facets"></a>レコードの種類のファセット  
 検索結果を特定のエンティティに絞り込むには、[レコードの**種類**] セクションでエンティティを選択します。  
 
  > [!div class="mx-imgBorder"]
  > ![検索結果を絞り込むためのレコードの種類のファセット](media/relevance-search-record-type-facet.png "検索結果を絞り込むために使用されるレコード型のファセット")  
  
 特定のレコードの種類をフィルター処理すると、選択したレコードに関連するアクティビティとメモを検索結果に含めることができます。 これを行うには、 **[関連するメモ & 活動]** チェックボックスをオンにします。 アクティビティとメモがトップレベルの結果に表示されます。  
  
 
  > [!div class="mx-imgBorder"]
  > ![レコードの種類に関連するメモとアクティビティを検索結果に含める](media/relevance-search-record-type-facet-related-notes-activities.png "レコードの種類に関連するメモとアクティビティを検索結果に含める")  
  
 電子メールの添付ファイルまたは予定のエンティティで見つかった検索結果は、検索結果の親レコード (電子メールまたは予定) に表示されます。  
  
 レコードの種類によって絞り込んだ場合、ファセットのスコープは選択されたエンティティに切り替わり、エンティティに固有の最大4つのファセットが表示されます。 たとえば、Account エンティティを選択した場合は、グローバルファセットに加えて**主要な Contact**ファセットが表示されます。  
  
 **[個人用オプションの設定]** ダイアログボックスでは、システム管理者または顧客が使用できるようにした他のファセットを選択することもできます。 ユーザー設定は、既定の設定よりも優先されます。 [検索用のファセットとフィルターを構成 [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] には](#BKMK_ConfigureFacets)  
  
### <a name="text-based-facets"></a>テキストベースのファセット  
 すべての参照、オプションセット、およびレコードの種類は、テキストベースのファセットです。 たとえば、テキストベースのファセット所有者は、フィールド値のリストとそれに対応するカウントで構成されます。  
 
  > [!div class="mx-imgBorder"]
  > ![関連性のある検索でのテキストベースのファセット](media/relevance-search-text-based-facets.png "関連性のある検索でのテキストベースのファセット")  
  
 これらのファセット内のフィルターは、カウント順に降順に並べ替えられます。 既定では、上位4つのファセット値が表示されます。 4つ以上のファセット値がある場合は、 **[詳細を表示]** リンクが表示されます。このリンクを選択すると、一覧を展開し、最大15個のファセット値を表示できます。 各値を選択すると、検索結果をフィルター処理して、フィールドに選択した値が含まれているレコードのみが表示されるようにすることができます。 たとえば、 **Kim Abercrombie**を選択すると、検索結果には、所有者が kim Abercrombie であるすべてのレコードが表示されます。 参照またはオプションセットのファセット値を選択すると、指定した値を持つレコードだけが検索結果にフィルター処理されます。  
  
### <a name="date-and-time-facets"></a>日付と時刻のファセット  
 他のファセットと同様に、日付と時刻のファセットを使用して、特定の時刻の検索結果をフィルター処理したり表示したりすることができます。 値の範囲を選択するには、スライダーをドラッグするか、垂直方向の列の1つを選択します。  
 
  > [!div class="mx-imgBorder"]
  > ![関連検索の日付と時刻のファセット](media/relevance-search-date-time-facets.png "関連検索の日付と時刻のファセット")  
  
<a name="BKMK_ConfigureFacets"></a>   
### <a name="configure-facets-and-filters-for-the-search"></a>検索用のファセットとフィルターを構成する  
 ファセットとフィルターを使用すると、検索語句を繰り返し調整することなく、現在の検索結果を掘り下げて調査することができます。 **[個人用オプションの設定]** ダイアログボックスで、必要なファセットとフィルターを構成します。  
  
> [!NOTE]
>  システムカスタマイザーは、すべてのエンティティの既定のエクスペリエンスを設定できますが、独自のファセットとフィルターを構成することができます。  
  
#### <a name="to-configure-facets-for-yourself"></a>自分用にファセットを構成するには  
  
1. ページの右上隅にある **[設定]** を選択し、 **[個人用設定]** を選択します。  
  
   > [!div class="mx-imgBorder"]
   > ![既定の検索エクスペリエンスを選択する](media/relevance-search-personal-settings.png "既定の検索エクスペリエンスを選択する")  
  
2. **[全般]** タブの **[既定の検索エクスペリエンスを選択]** します セクションで、 **[ファセットとフィルター]** フィールドの **[構成]** を選択します。  
  
3. **[ファセットとフィルターの構成]** ダイアログボックスで、エンティティに対して表示するファセットを指定します。 システム管理者またはカスタマイザーは、すべてのエンティティに既定のエクスペリエンスを設定できますが、ここで独自の設定を行うことができます。  
  
   - **[エンティティの選択**] ドロップダウンリストで、ファセットを構成するエンティティを選択します。 このドロップダウンリストには、関連性検索が有効になっているエンティティのみが表示されます。  
  
   - 選択したエンティティに対して、最大4つのファセットフィールドを選択します。 既定では、選択したエンティティの **[クイック検索]** ビューの最初の4つのファセット可能フィールドが、一覧で選択されています。 常に、ファセットとして選択できるフィールドは4つだけです。  
  
     複数のエンティティを一度に更新できます。 **[OK]** を選択すると、構成したすべてのエンティティに対する変更が保存されます。 以前に構成したエンティティの既定の動作に戻すには、 **[既定]** を選択します。  
  
   > [!NOTE]
   > - システムカスタマイザーによってフィールドが削除されるか、または検索できなくなり、そのフィールドのファセットが保存されている場合は、ファセットとして表示されなくなります。  
   >   -   既定のソリューションに存在し、システムカスタマイザーによって検索可能として構成されているフィールドのみが表示されます。  
  
 
